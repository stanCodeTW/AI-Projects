<!DOCTYPE html>
<!-- Generated with Dr.js -->
<html lang="en"><head><meta charset="utf-8"><title>F.LF/core Reference</title>
<style type="text/css" media="screen">
html, body {
    height: 100%;
    margin: 0;
    padding: 0;
}
#dr-js {
    background: #999;
    margin: 0;
    padding: 0;
    overflow-y: hidden;
}
#src-dr-js {
    background: #000;
    margin: 1em;
    padding: 0;
}
.dr-doc {
    background: #eee;
    border-right: solid #eee 3px;
    float: right;
    font: 300 16px/1.4 "Myriad Pro", "Helvetica Neue", Helvetica, "Arial Unicode MS", Arial, sans-serif;
    height: 100%;
    margin: 0;
    overflow: auto;
    padding: 0 30px;
    width: 800px;
}
.dr-toc {
    margin: 0;
    padding: 0 16px;
    background: #ddd;
    list-style: none;
    font-family: Menlo, Consolas, Monaco, "Lucida Console", monospace;
    overflow: auto;
    border-right: solid #ddd 3px;
    height: 100%;
    float: right;
    width: 240px;
}
#dr {
    margin: 0 auto;
    width: 1152px;
    height: 100%;
}
::-moz-selection {
    background: #c00;
    color: #fff;
}
::selection {
    background: #c00;
    color: #fff;
}
.dr-doc code
{
	background: #FFF;
	border-radius: 5px;
	padding: 0 6px;
	border: 1px solid #CCC;
}
.dr-doc pre code
{
	background: none;
	padding: 0;
	border: none;
}
.dr-doc code,
.dr-type em,
.dr-returns em,
.dr-property em {
    font-family: Menlo, Consolas, Monaco, "Lucida Console", monospace;
}
.extra {
    display: none;
}
pre.code code {
    color: #fff;
}
pre.code {
    background: #333;
    color: #fff;
    overflow-x: auto;
    padding: 16px 30px;
    margin: 0 -30px;
}
code b {
    color: #e9df8f;
    font-weight: normal;
}
code i,
code i *,
code i .d {
    color: #8b9967;
    font-style: normal;
}
code .s {
    color: #e7be61;
}
code .d {
    color: #cf6a4c;
}
code .c,
code .c * {
    color: #999;
    font-style: italic;
}
em.amp {
    font-family: Baskerville, "Goudy Old Style", Palatino, "Book Antiqua", serif;
    font-style: italic;
}
dl.dr-parameters {
    margin: 8px 0;
}
dt.dr-param {
    color: #666;
    font-weight: 400;
    float: left;
    margin-right: 16px;
    min-width: 160px;
}
dd.dr-type {
    margin: 0;
}
dd.dr-description {
    display: table;
    min-height: 24px;
    border: solid 1px #eee;
}
.dr-type {
    float: left;
}
.dr-type em,
.dr-returns em,
.dr-property em {
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    background: #ccc;
    border-radius: 5px;
    float: left;
    font-size: .75em;
    font-style: normal;
    font-weight: 700;
    margin: 0 8px 0 0;
    min-width: 80px;
    padding: 2px 5px;
    text-align: center;
}
.dr-type em.amp,
.dr-returns em.amp,
.dr-property em.amp {
    float: none;
    background: none;
    font-size: 1em;
    font-weight: 400;
    font-style: italic;
    margin: 0;
    padding: 0;
    min-width: 0;
}
.dr-property em.dr-type {
    margin: 4px 16px 0 0;
}
em.dr-type-string {
    background: #e1edb1;
    color: #3d4c00;
}
em.dr-type-object {
    background: #edb1b1;
    color: #4c0000;
}
em.dr-type-function {
    background: #cfb1ed;
    color: #26004c;
}
em.dr-type-number {
    background: #b1c9ed;
    color: #001e4c;
}
em.dr-type-boolean {
    background: #b1edc9;
    color: #004c1e;
}
em.dr-type-array {
    background: #edd5b1;
    color: #4c2d00;
}
dd.dr-optional {
    display: none;
}
ol.dr-json {
    background: #ddd;
    list-style: none;
    margin: 0 -30px;
    padding: 16px 30px;
}
ol.dr-json .dr-json-key {
    float: left;
    min-width: 50px;
    margin-right: 16px;
}
ol.dr-json .dr-json-description {
    display: table;
}
ol.dr-json ol.dr-json  {
    margin: 0;
    padding: 0 0 0 50px;
}
h1 {
    font-weight: 400;
    font-size: 2.6em;
    margin: 0;
}
h2, h3, h4, h5 {
    margin: 1em 0 .5em 0;
    padding: 6px 0 0;
    font-weight: 600;
    position: relative;
}
h5 {
    font-size: 18px;
}
h4 {
    font-size: 20px;
}
h3 {
    font-size: 28px;
}
h2 {
    font-size: 38px;
}
h2.dr-class,
h3.dr-class,
h4.dr-class,
h5.dr-class {
    color: #009;
}
h2.dr-method,
h3.dr-method,
h4.dr-method,
h5.dr-method {
    color: #900;
}
h2.dr-property,
h3.dr-property,
h4.dr-property,
h5.dr-property {
    color: #090;
}
i.dr-trixie {
    border: solid 10px #eee;
    border-left-color: #999;
    height: 0;
    margin-left: -30px;
    margin-top: -10px;
    overflow: hidden;
    position: absolute;
    top: 50%;
    width: 0;
}
p.header {
    font-size: 19px;
    font-weight: 600;
    margin: 1em 0 .3em;
}
.dr-returns {
    margin-top: 16px;
}
.dr-returns .dr-title {
    float: left;
    margin-right: 16px;
    width: 160px;
}
.dr-toc a {
    display: block;
    text-decoration: none;
    color: #333;
    padding-top: 8px;
    position: relative;
    z-index: 1000;
}
.dr-toc li.dr-lvl1 a {
    padding-left: 1em;
}
.dr-toc li.dr-lvl2 a {
    padding-left: 2em;
}
.dr-toc li.dr-lvl3 a {
    padding-left: 3em;
}
.dr-toc li.dr-lvl4 a {
    padding-left: 4em;
}
.dr-toc li.dr-lvl5 a {
    padding-left: 5em;
}
.dr-toc li.dr-lvl6 a {
    padding-left: 6em;
}
.dr-toc a.dr-class {
    color: #339;
}
.dr-toc a.dr-property {
    color: #393;
}
.dr-toc a.dr-method {
    color: #933;
}
.dr-toc a:hover {
    text-shadow: 0 0 2px #333;
}
.dr-toc a.dr-class:hover {
    text-shadow: 0 0 2px #66c;
}
.dr-toc a.dr-property:hover {
    text-shadow: 0 0 2px #6c6;
}
.dr-toc a.dr-method:hover {
    text-shadow: 0 0 2px #c66;
}
a.dr-hash,
a.dr-sourceline {
    -webkit-transition: opacity 0.2s linear;
    color: #333;
    font-family: Menlo, "Arial Unicode MS", sans-serif;
    margin: 0 0 0 .3em;
    opacity: 0;
    text-decoration: none;
}
a.dr-link {
    position: relative;
    color: #3875c0;
}
a.dr-link:hover {
    text-shadow: 0 1px 2px #999;
    bottom: 1px;
    padding-bottom: 1px;
}
a.dr-link:visited {
    color: #7051bc;
}
h2:hover a.dr-hash,
h3:hover a.dr-hash,
h4:hover a.dr-hash,
h5:hover a.dr-hash,
h2:hover a.dr-sourceline,
h3:hover a.dr-sourceline,
h4:hover a.dr-sourceline,
h5:hover a.dr-sourceline {
    opacity: 1;
}
p {
    margin: 0 0 .5em;
}

.dr-source-line {
    margin: 0;
}
.dr-source-line a {
    -webkit-border-radius: 5px;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    border-radius: 5px;
    color: #000;
    background: #999;
    font-weight: 400;
    font-size: .75em;
    text-decoration: none;
    padding: 5px;
}
#src-dr-js code {
    background: #000;
    display: block;
    color: #fff;
    font-family: Menlo, Consolas, Monaco, "Lucida Console", monospace;
    white-space: pre;
    padding-left: 100px;
    position: relative;
    line-height: 1.2;
}
#src-dr-js code:hover {
    background: #333;
}
#src-dr-js code:hover .ln {
    color: #fff;
}
#src-dr-js code .ln {
    position: absolute;
    left: 0;
    color: #333;
    width: 70px;
    text-align: right;
}

/*Scrollbar*/
.dr-doc::-webkit-scrollbar,
.dr-toc::-webkit-scrollbar {
    width: 7px;
    height: 9px;
}
.dr-doc::-webkit-scrollbar-button:start:decrement, 
.dr-doc::-webkit-scrollbar-button:end:increment,
.dr-toc::-webkit-scrollbar-button:start:decrement, 
.dr-toc::-webkit-scrollbar-button:end:increment {
    display: block;
    height: 0;
    background-color: transparent;
}
.dr-doc::-webkit-scrollbar-track-piece,
.dr-toc::-webkit-scrollbar-track-piece {
    -webkit-border-radius: 0;
    -webkit-border-bottom-right-radius: 4px;
    -webkit-border-bottom-left-radius: 4px;
}
.dr-doc::-webkit-scrollbar-thumb:vertical,
.dr-toc::-webkit-scrollbar-thumb:vertical {
    height: 50px;
    background-color: rgba(0, 0, 0, 0.2);
    -webkit-border-radius: 4px;
}
.dr-doc::-webkit-scrollbar-thumb:horizontal,
.dr-toc::-webkit-scrollbar-thumb:horizontal {
    width: 50px;
    background-color: rgba(0, 0, 0, 0.2);
    -webkit-border-radius: 4px;
}

</style>
<style type="text/css" media="print">
html, body {
    margin: 0;
    padding: 0;
}
#dr-js {
    margin: 0;
    padding: 0;
}
#src-dr-js {
    margin: 1em;
    padding: 0;
}
.dr-doc {
    font: 300 16px/1.4 "Myriad Pro", "Helvetica Neue", Helvetica, "Arial Unicode MS", Arial, sans-serif;
    margin: 0;
    padding: 0 30px 10px;
}
.dr-toc {
    font-family: Menlo, Consolas, Monaco, "Lucida Console", monospace;
    list-style: none;
    margin: 0;
    padding: 0 16px;
	float: right;
}
.dr-toc input {
	display: none;
}
#dr {
    margin: 0 auto;
}
.dr-doc code
{
	background: #FFF;
	border-radius: 5px;
	padding: 0 6px;
	border: 1px solid #CCC;
}
.dr-doc pre code
{
	background: none;
	padding: 0;
	border: none;
}
.dr-doc code,
.dr-type em,
.dr-returns em,
.dr-property em {
    font-family: Menlo, Consolas, Monaco, "Lucida Console", monospace;
}
.extra {
    display: none;
}
pre.code code {
    color: #000;
}
pre.code {
    background: #eee;
	border: solid 1px #ccc;
    color: #000;
    overflow-x: auto;
    padding: 16px 30px;
    margin: 0 -30px;
}
code b {
    color: #e98553;
    font-weight: normal;
}
code i,
code i *,
code i .d {
    color: #5c993f;
    font-style: normal;
}
code .s {
    color: #e7be61;
}
code .d {
    color: #cf6a4c;
}
code .c,
code .c * {
    color: #999;
    font-style: italic;
}
em.amp {
    font-family: Baskerville, "Goudy Old Style", Palatino, "Book Antiqua", serif;
    font-style: italic;
}
dl.dr-parameters {
    margin: 8px 0;
}
dt.dr-param {
    color: #666;
    font-weight: 400;
    float: left;
    margin-right: 16px;
    min-width: 160px;
}
dd.dr-type {
    margin: 0;
}
dd.dr-description {
    display: table;
    min-height: 24px;
    border: solid 1px #fff;
}
.dr-type {
    float: left;
}
.dr-type em,
.dr-returns em,
.dr-property em {
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    background: #ccc;
    border-radius: 5px;
    float: left;
    font-size: .75em;
    font-style: normal;
    font-weight: 700;
    margin: 0 8px 0 0;
    min-width: 80px;
    padding: 2px 5px;
    text-align: center;
}
.dr-type em.amp,
.dr-returns em.amp,
.dr-property em.amp {
    float: none;
    background: none;
    font-size: 1em;
    font-weight: 400;
    font-style: italic;
    margin: 0;
    padding: 0;
    min-width: 0;
}
.dr-property em.dr-type {
    margin: 4px 16px 0 0;
}
em.dr-type-string {
    background: #e1edb1;
    color: #3d4c00;
}
em.dr-type-object {
    background: #edb1b1;
    color: #4c0000;
}
em.dr-type-function {
    background: #cfb1ed;
    color: #26004c;
}
em.dr-type-number {
    background: #b1c9ed;
    color: #001e4c;
}
em.dr-type-boolean {
    background: #b1edc9;
    color: #004c1e;
}
em.dr-type-array {
    background: #edd5b1;
    color: #4c2d00;
}
dd.dr-optional {
    display: none;
}
ol.dr-json {
    background: #ddd;
    list-style: none;
    margin: 0 -30px;
    padding: 16px 30px;
}
ol.dr-json .dr-json-key {
    float: left;
    min-width: 50px;
    margin-right: 16px;
}
ol.dr-json .dr-json-description {
    display: table;
}
ol.dr-json ol.dr-json  {
    margin: 0;
    padding: 0 0 0 50px;
}
h1 {
    font-weight: 400;
    font-size: 2.6em;
    margin: 0;
}
h2, h3, h4, h5 {
    margin: 1em 0 .5em 0;
    padding: 6px 0 0;
    font-weight: 600;
    position: relative;
}
h5 {
    font-size: 18px;
}
h4 {
    font-size: 20px;
}
h3 {
    font-size: 28px;
}
h2 {
    font-size: 38px;
}
h2.dr-class,
h3.dr-class,
h4.dr-class,
h5.dr-class {
    color: #009;
}
h2.dr-method,
h3.dr-method,
h4.dr-method,
h5.dr-method {
    color: #900;
}
h2.dr-property,
h3.dr-property,
h4.dr-property,
h5.dr-property {
    color: #090;
}
i.dr-trixie {
	display: none;
}
p.header {
    font-size: 19px;
    font-weight: 600;
    margin: 1em 0 .3em;
}
.dr-returns {
    margin-top: 16px;
}
.dr-returns .dr-title {
    float: left;
    margin-right: 16px;
    width: 160px;
}
.dr-toc a {
    display: block;
    text-decoration: none;
    color: #333;
    padding-top: 8px;
    position: relative;
    z-index: 1000;
}
.dr-toc li.dr-lvl1 a {
    padding-left: 1em;
}
.dr-toc li.dr-lvl2 a {
    padding-left: 2em;
}
.dr-toc li.dr-lvl3 a {
    padding-left: 3em;
}
.dr-toc li.dr-lvl4 a {
    padding-left: 4em;
}
.dr-toc li.dr-lvl5 a {
    padding-left: 5em;
}
.dr-toc li.dr-lvl6 a {
    padding-left: 6em;
}
.dr-toc a.dr-class {
    color: #339;
}
.dr-toc a.dr-property {
    color: #393;
}
.dr-toc a.dr-method {
    color: #933;
}
.dr-toc a:hover {
    text-shadow: 0 0 2px #333;
}
.dr-toc a.dr-class:hover {
    text-shadow: 0 0 2px #66c;
}
.dr-toc a.dr-property:hover {
    text-shadow: 0 0 2px #6c6;
}
.dr-toc a.dr-method:hover {
    text-shadow: 0 0 2px #c66;
}
a.dr-hash,
a.dr-sourceline {
    -webkit-transition: opacity 0.2s linear;
    color: #333;
    font-family: Menlo, "Arial Unicode MS", sans-serif;
    margin: 0 0 0 .3em;
    opacity: 0;
    text-decoration: none;
}
a.dr-link {
    position: relative;
    color: #3875c0;
}
a.dr-link:hover {
    text-shadow: 0 1px 2px #999;
    bottom: 1px;
    padding-bottom: 1px;
}
a.dr-link:visited {
    color: #7051bc;
}
h2:hover a.dr-hash,
h3:hover a.dr-hash,
h4:hover a.dr-hash,
h5:hover a.dr-hash,
h2:hover a.dr-sourceline,
h3:hover a.dr-sourceline,
h4:hover a.dr-sourceline,
h5:hover a.dr-sourceline {
    opacity: 1;
}
p {
    margin: 0 0 .5em;
}

.dr-source-line {
    margin: 0;
}
.dr-source-line a {
    -webkit-border-radius: 5px;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    border-radius: 5px;
    color: #000;
    background: #999;
    font-weight: 400;
    font-size: .75em;
    text-decoration: none;
    padding: 5px;
}
#src-dr-js code {
    background: #000;
    display: block;
    color: #fff;
    font-family: Menlo, Consolas, Monaco, "Lucida Console", monospace;
    white-space: pre;
    padding-left: 100px;
    position: relative;
    line-height: 1.2;
}
#src-dr-js code:hover {
    background: #333;
}
#src-dr-js code:hover .ln {
    color: #fff;
}
#src-dr-js code .ln {
    position: absolute;
    left: 0;
    color: #333;
    width: 70px;
    text-align: right;
}

</style>
</head>
<body id="dr-js"><div id="dr"><ol class="dr-toc" id="dr-toc"><li class="dr-lvl0"><a href="#animator" class="dr-class"><span>animator</span></a></li><li class="dr-lvl1"><a href="#animator.I" class="dr-property"><span>animator.I</span></a></li><li class="dr-lvl1"><a href="#animator.flip_x" class="dr-property"><span>animator.flip_x</span></a></li><li class="dr-lvl1"><a href="#animator.next_frame" class="dr-method"><span>animator.next_frame()</span></a></li><li class="dr-lvl1"><a href="#animator.rewind" class="dr-method"><span>animator.rewind()</span></a></li><li class="dr-lvl1"><a href="#animator.seek" class="dr-method"><span>animator.seek()</span></a></li><li class="dr-lvl1"><a href="#animator.set" class="dr-method"><span>animator.set()</span></a></li><li class="dr-lvl1"><a href="#animator.set_frame" class="dr-method"><span>animator.set_frame()</span></a></li><li class="dr-lvl0"><a href="#collision" class="{clas}"><span>collision</span></a></li><li class="dr-lvl1"><a href="#collision.circle" class="dr-method"><span>collision.circle()</span></a></li><li class="dr-lvl1"><a href="#collision.line" class="dr-method"><span>collision.line()</span></a></li><li class="dr-lvl1"><a href="#collision.point_in_rect" class="dr-method"><span>collision.point_in_rect()</span></a></li><li class="dr-lvl1"><a href="#collision.rect" class="dr-method"><span>collision.rect()</span></a></li><li class="dr-lvl1"><a href="#collision.tri" class="dr-method"><span>collision.tri()</span></a></li><li class="dr-lvl0"><a href="#combo detector" class="{clas}"><span>combo detector</span></a></li><li class="dr-lvl0"><a href="#combodec" class="dr-class"><span>combodec</span></a></li><li class="dr-lvl1"><a href="#combodec.clear_seq" class="dr-method"><span>combodec.clear_seq()</span></a></li><li class="dr-lvl1"><a href="#combodec.combo" class="dr-property"><span>combodec.combo</span></a></li><li class="dr-lvl1"><a href="#combodec.comboout" class="dr-property"><span>combodec.comboout</span></a></li><li class="dr-lvl1"><a href="#combodec.con" class="dr-property"><span>combodec.con</span></a></li><li class="dr-lvl1"><a href="#combodec.config" class="dr-property"><span>combodec.config</span></a></li><li class="dr-lvl1"><a href="#combodec.frame" class="dr-method"><span>combodec.frame()</span></a></li><li class="dr-lvl1"><a href="#combodec.key" class="dr-method"><span>combodec.key()</span></a></li><li class="dr-lvl1"><a href="#combodec.seq" class="dr-property"><span>combodec.seq</span></a></li><li class="dr-lvl1"><a href="#combodec.time" class="dr-property"><span>combodec.time</span></a></li><li class="dr-lvl1"><a href="#combodec.timeout" class="dr-property"><span>combodec.timeout</span></a></li><li class="dr-lvl0"><a href="#control_player" class="dr-class"><span>control_player</span></a></li><li class="dr-lvl1"><a href="#control_player.child" class="dr-property"><span>control_player.child</span></a></li><li class="dr-lvl1"><a href="#control_player.clear_states" class="dr-method"><span>control_player.clear_states()</span></a></li><li class="dr-lvl1"><a href="#control_player.fetch" class="dr-method"><span>control_player.fetch()</span></a></li><li class="dr-lvl1"><a href="#control_player.flush" class="dr-method"><span>control_player.flush()</span></a></li><li class="dr-lvl1"><a href="#control_player.frame" class="dr-method"><span>control_player.frame()</span></a></li><li class="dr-lvl1"><a href="#control_player.state" class="dr-property"><span>control_player.state</span></a></li><li class="dr-lvl1"><a href="#control_player.sync" class="dr-property"><span>control_player.sync</span></a></li><li class="dr-lvl0"><a href="#control_recorder" class="dr-class"><span>control_recorder</span></a></li><li class="dr-lvl1"><a href="#control_recorder.export_str" class="dr-method"><span>control_recorder.export_str()</span></a></li><li class="dr-lvl1"><a href="#control_recorder.frame" class="dr-method"><span>control_recorder.frame()</span></a></li><li class="dr-lvl1"><a href="#control_recorder.key" class="dr-method"><span>control_recorder.key()</span></a></li><li class="dr-lvl0"><a href="#controller" class="dr-class"><span>controller</span></a></li><li class="dr-lvl1"><a href="#controller.block" class="dr-method"><span>controller.block()</span></a></li><li class="dr-lvl1"><a href="#controller.buf" class="dr-property"><span>controller.buf</span></a></li><li class="dr-lvl1"><a href="#controller.child" class="dr-property"><span>controller.child</span></a></li><li class="dr-lvl1"><a href="#controller.clear_states" class="dr-method"><span>controller.clear_states()</span></a></li><li class="dr-lvl1"><a href="#controller.config" class="dr-property"><span>controller.config</span></a></li><li class="dr-lvl1"><a href="#controller.destroy" class="dr-method"><span>controller.destroy()</span></a></li><li class="dr-lvl1"><a href="#controller.fetch" class="dr-method"><span>controller.fetch()</span></a></li><li class="dr-lvl1"><a href="#controller.flush" class="dr-method"><span>controller.flush()</span></a></li><li class="dr-lvl1"><a href="#controller.key" class="dr-method"><span>controller.key()</span></a></li><li class="dr-lvl1"><a href="#controller.keycode" class="dr-property"><span>controller.keycode</span></a></li><li class="dr-lvl1"><a href="#controller.keycode_to_keyname" class="dr-method"><span>controller.keycode_to_keyname()</span></a></li><li class="dr-lvl1"><a href="#controller.keyname_to_keycode" class="dr-method"><span>controller.keyname_to_keycode()</span></a></li><li class="dr-lvl1"><a href="#controller.state" class="dr-property"><span>controller.state</span></a></li><li class="dr-lvl1"><a href="#controller.sync" class="dr-property"><span>controller.sync</span></a></li><li class="dr-lvl1"><a href="#controller.type" class="dr-property"><span>controller.type</span></a></li><li class="dr-lvl1"><a href="#controller.zppendix" class="{clas}"><span>controller.zppendix</span></a></li><li class="dr-lvl0"><a href="#controller_changer" class="dr-class"><span>controller_changer</span></a></li><li class="dr-lvl0"><a href="#css" class="{clas}"><span>css</span></a></li><li class="dr-lvl0"><a href="#effects_pool" class="dr-class"><span>effects_pool</span></a></li><li class="dr-lvl1"><a href="#effects_pool.call_each" class="dr-method"><span>effects_pool.call_each()</span></a></li><li class="dr-lvl1"><a href="#effects_pool.create" class="dr-method"><span>effects_pool.create()</span></a></li><li class="dr-lvl1"><a href="#effects_pool.die" class="dr-method"><span>effects_pool.die()</span></a></li><li class="dr-lvl1"><a href="#effects_pool.for_each" class="dr-method"><span>effects_pool.for_each()</span></a></li><li class="dr-lvl0"><a href="#math" class="{clas}"><span>math</span></a></li><li class="dr-lvl1"><a href="#math.add" class="dr-method"><span>math.add()</span></a></li><li class="dr-lvl1"><a href="#math.bezier2" class="dr-method"><span>math.bezier2()</span></a></li><li class="dr-lvl1"><a href="#math.distance" class="dr-method"><span>math.distance()</span></a></li><li class="dr-lvl1"><a href="#math.inbetween" class="dr-method"><span>math.inbetween()</span></a></li><li class="dr-lvl1"><a href="#math.intersect" class="dr-method"><span>math.intersect()</span></a></li><li class="dr-lvl1"><a href="#math.length" class="dr-method"><span>math.length()</span></a></li><li class="dr-lvl1"><a href="#math.negative" class="dr-method"><span>math.negative()</span></a></li><li class="dr-lvl1"><a href="#math.negligible" class="dr-method"><span>math.negligible()</span></a></li><li class="dr-lvl1"><a href="#math.normalize" class="dr-method"><span>math.normalize()</span></a></li><li class="dr-lvl1"><a href="#math.perpen" class="dr-method"><span>math.perpen()</span></a></li><li class="dr-lvl1"><a href="#math.round_d2" class="dr-method"><span>math.round_d2()</span></a></li><li class="dr-lvl1"><a href="#math.scale" class="dr-method"><span>math.scale()</span></a></li><li class="dr-lvl1"><a href="#math.signed_area" class="dr-method"><span>math.signed_area()</span></a></li><li class="dr-lvl1"><a href="#math.sub" class="dr-method"><span>math.sub()</span></a></li><li class="dr-lvl0"><a href="#network" class="{clas}"><span>network</span></a></li><li class="dr-lvl1"><a href="#network.clearInterval" class="dr-method"><span>network.clearInterval()</span></a></li><li class="dr-lvl1"><a href="#network.messenger" class="dr-property"><span>network.messenger</span></a></li><li class="dr-lvl1"><a href="#network.setInterval" class="dr-method"><span>network.setInterval()</span></a></li><li class="dr-lvl1"><a href="#network.setup" class="dr-method"><span>network.setup()</span></a></li><li class="dr-lvl1"><a href="#network.teardown" class="dr-method"><span>network.teardown()</span></a></li><li class="dr-lvl1"><a href="#network.transfer" class="dr-method"><span>network.transfer()</span></a></li><li class="dr-lvl0"><a href="#resourcemap" class="dr-class"><span>resourcemap</span></a></li><li class="dr-lvl1"><a href="#resourcemap.fallback" class="dr-method"><span>resourcemap.fallback()</span></a></li><li class="dr-lvl1"><a href="#resourcemap.get" class="dr-method"><span>resourcemap.get()</span></a></li><li class="dr-lvl1"><a href="#resourcemap.update_condition" class="dr-method"><span>resourcemap.update_condition()</span></a></li><li class="dr-lvl0"><a href="#sprite" class="dr-class"><span>sprite</span></a></li><li class="dr-lvl0"><a href="#sprite-canvas" class="{clas}"><span>sprite-canvas</span></a></li><li class="dr-lvl0"><a href="#sprite-dom" class="{clas}"><span>sprite-dom</span></a></li><li class="dr-lvl1"><a href="#sprite.add_img" class="dr-method"><span>sprite.add_img()</span></a></li><li class="dr-lvl1"><a href="#sprite.attach" class="dr-method"><span>sprite.attach()</span></a></li><li class="dr-lvl1"><a href="#sprite.cur_img" class="dr-property"><span>sprite.cur_img</span></a></li><li class="dr-lvl1"><a href="#sprite.h" class="dr-property"><span>sprite.h</span></a></li><li class="dr-lvl1"><a href="#sprite.hide" class="dr-method"><span>sprite.hide()</span></a></li><li class="dr-lvl1"><a href="#sprite.img" class="dr-property"><span>sprite.img</span></a></li><li class="dr-lvl1"><a href="#sprite.masterconfig" class="dr-method"><span>sprite.masterconfig()</span></a></li><li class="dr-lvl1"><a href="#sprite.masterconfig_set" class="dr-method"><span>sprite.masterconfig_set()</span></a></li><li class="dr-lvl1"><a href="#sprite.preload_image" class="dr-method"><span>sprite.preload_image()</span></a></li><li class="dr-lvl1"><a href="#sprite.remove" class="dr-method"><span>sprite.remove()</span></a></li><li class="dr-lvl1"><a href="#sprite.remove_all" class="dr-method"><span>sprite.remove_all()</span></a></li><li class="dr-lvl1"><a href="#sprite.remove_img" class="dr-method"><span>sprite.remove_img()</span></a></li><li class="dr-lvl1"><a href="#sprite.render" class="dr-method"><span>sprite.render()</span></a></li><li class="dr-lvl1"><a href="#sprite.renderer" class="dr-property"><span>sprite.renderer</span></a></li><li class="dr-lvl1"><a href="#sprite.resolve_resource" class="dr-method"><span>sprite.resolve_resource()</span></a></li><li class="dr-lvl1"><a href="#sprite.set_alpha" class="dr-method"><span>sprite.set_alpha()</span></a></li><li class="dr-lvl1"><a href="#sprite.set_bgcolor" class="dr-method"><span>sprite.set_bgcolor()</span></a></li><li class="dr-lvl1"><a href="#sprite.set_flipx" class="dr-method"><span>sprite.set_flipx()</span></a></li><li class="dr-lvl1"><a href="#sprite.set_flipy" class="dr-method"><span>sprite.set_flipy()</span></a></li><li class="dr-lvl1"><a href="#sprite.set_h" class="dr-method"><span>sprite.set_h()</span></a></li><li class="dr-lvl1"><a href="#sprite.set_img_x_y" class="dr-method"><span>sprite.set_img_x_y()</span></a></li><li class="dr-lvl1"><a href="#sprite.set_img_xy" class="dr-method"><span>sprite.set_img_xy()</span></a></li><li class="dr-lvl1"><a href="#sprite.set_w" class="dr-method"><span>sprite.set_w()</span></a></li><li class="dr-lvl1"><a href="#sprite.set_w_h" class="dr-method"><span>sprite.set_w_h()</span></a></li><li class="dr-lvl1"><a href="#sprite.set_wh" class="dr-method"><span>sprite.set_wh()</span></a></li><li class="dr-lvl1"><a href="#sprite.set_x_y" class="dr-method"><span>sprite.set_x_y()</span></a></li><li class="dr-lvl1"><a href="#sprite.set_xy" class="dr-method"><span>sprite.set_xy()</span></a></li><li class="dr-lvl1"><a href="#sprite.set_z" class="dr-method"><span>sprite.set_z()</span></a></li><li class="dr-lvl1"><a href="#sprite.show" class="dr-method"><span>sprite.show()</span></a></li><li class="dr-lvl1"><a href="#sprite.switch_img" class="dr-method"><span>sprite.switch_img()</span></a></li><li class="dr-lvl1"><a href="#sprite.w" class="dr-property"><span>sprite.w</span></a></li><li class="dr-lvl1"><a href="#sprite.x" class="dr-property"><span>sprite.x</span></a></li><li class="dr-lvl1"><a href="#sprite.x_flipped" class="dr-property"><span>sprite.x_flipped</span></a></li><li class="dr-lvl1"><a href="#sprite.y" class="dr-property"><span>sprite.y</span></a></li><li class="dr-lvl1"><a href="#sprite.y_flipped" class="dr-property"><span>sprite.y_flipped</span></a></li><li class="dr-lvl1"><a href="#sprite.z" class="dr-property"><span>sprite.z</span></a></li><li class="dr-lvl0"><a href="#support" class="{clas}"><span>support</span></a></li><li class="dr-lvl1"><a href="#support.browser" class="dr-property"><span>support.browser</span></a></li><li class="dr-lvl1"><a href="#support.browser_name" class="dr-property"><span>support.browser_name</span></a></li><li class="dr-lvl1"><a href="#support.browser_version" class="dr-property"><span>support.browser_version</span></a></li><li class="dr-lvl1"><a href="#support.css2dtransform" class="dr-property"><span>support.css2dtransform</span></a></li><li class="dr-lvl1"><a href="#support.css3dtransform" class="dr-property"><span>support.css3dtransform</span></a></li><li class="dr-lvl1"><a href="#support.localStorage" class="dr-property"><span>support.localStorage</span></a></li><li class="dr-lvl1"><a href="#support.mobile" class="dr-property"><span>support.mobile</span></a></li><li class="dr-lvl1"><a href="#support.prefix" class="dr-property"><span>support.prefix</span></a></li><li class="dr-lvl1"><a href="#support.prefix_css" class="dr-property"><span>support.prefix_css</span></a></li><li class="dr-lvl1"><a href="#support.prefix_dom" class="dr-property"><span>support.prefix_dom</span></a></li><li class="dr-lvl1"><a href="#support.prefix_js" class="dr-property"><span>support.prefix_js</span></a></li><li class="dr-lvl1"><a href="#support.sessionStorage" class="dr-property"><span>support.sessionStorage</span></a></li><li class="dr-lvl0"><a href="#util" class="{clas}"><span>util</span></a></li><li class="dr-lvl1"><a href="#util.css" class="dr-method"><span>util.css()</span></a></li><li class="dr-lvl1"><a href="#util.extend_object" class="dr-method"><span>util.extend_object()</span></a></li><li class="dr-lvl1"><a href="#util.extract_array" class="dr-method"><span>util.extract_array()</span></a></li><li class="dr-lvl1"><a href="#util.make_array" class="dr-method"><span>util.make_array()</span></a></li><li class="dr-lvl1"><a href="#util.push_unique" class="dr-method"><span>util.push_unique()</span></a></li><li class="dr-lvl1"><a href="#util.search_array" class="dr-method"><span>util.search_array()</span></a></li><li class="dr-lvl1"><a href="#util.to_text" class="dr-method"><span>util.to_text()</span></a></li></ol><div class="dr-doc"><h1>F.LF/core Reference</h1><div class="animator-section"><h2 id="animator" class="dr-class"><i class="dr-trixie">&#160;</i>animator(config)<a href="#animator" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 27 in the source" href="../animator.js#L27">&#x27ad;</a></h2>
<div class="extra" id="animator-extra"></div></div><div class="dr-class"><p><li>animate sprites</li>
<li>support multiple animation sequence on the same image</li>
</p>
<dl class="dr-parameters"><dt class="dr-param">config</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<pre class="javascript code"><code>{
	x:<span class="d">0</span>,y:<span class="d">0</span>,     <span class="c">//top left margin of the frames</span>
	w:<span class="d">100</span>, h:<span class="d">100</span>,<span class="c">//width, height of a frame</span>
	gx:<span class="d">4</span>,gy:<span class="d">4</span>,   <span class="c">//define a gx*gy grid of frames</span>
	tar:         <span class="c">//target @sprite</span>
	ani:         <span class="c">//[optional] animation sequence:</span>
		<b>null</b>,    <span class="c">//<b>if</b> <b>undefined</b>, loop through top left to lower right, row by row</span>
		[<span class="d">0</span>,<span class="d">1</span>,<span class="d">2</span>,<span class="d">1</span>,<span class="d">0</span>],<span class="c">//use custom animation sequence</span>
	borderright: <span class="d">1</span>, <span class="c">//[optionals] trim the right edge pixels away</span>
	borderbottom: <span class="d">1</span>,
	borderleft: <span class="d">1</span>,
	bordertop: <span class="d">1</span>
}
</code></pre>
<p>multiple animators reference to the same config, so dont play with it in runtime
</p>
<p><a href="../sample/sprite1.html">example</a>
</p>
</div><div class="animator-I-section"><h3 id="animator.I" class="dr-property"><i class="dr-trixie">&#160;</i>animator.I<a href="#animator.I" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 37 in the source" href="../animator.js#L37">&#x27ad;</a></h3>
<div class="extra" id="animator.I-extra"></div></div><p>current frame
</p>
<div class="dr-property"><p>if <code>config.ani</code> exists, <code>I</code> is the index to this array. otherwise it is the frame number
</p>
</div><div class="animator-flip_x-section"><h3 id="animator.flip_x" class="dr-property"><i class="dr-trixie">&#160;</i>animator.flip_x<a href="#animator.flip_x" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 44 in the source" href="../animator.js#L44">&#x27ad;</a></h3>
<div class="extra" id="animator.flip_x-extra"></div></div><div class="dr-property"><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-boolean">boolean</em></dd>
<dd class="dr-description">true: mirrored, false: normal</dd>
</dl>
<p>usually a sprite character is drawn to face right and mirrored to face left. hmirror mode works with sprites that is flipped horizontally <strong>as a whole image</strong>.
</p>
</div><div class="animator-next_frame-section"><h3 id="animator.next_frame" class="dr-method"><i class="dr-trixie">&#160;</i>animator.next_frame()<a href="#animator.next_frame" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 60 in the source" href="../animator.js#L60">&#x27ad;</a></h3>
<div class="extra" id="animator.next_frame-extra"></div></div><p>turn to the next frame
</p>
<div class="dr-method"><p>if <code>config.ani</code> exists, will go to the next frame of animation sequence
</p>
<p>otherwise, loop through top left to lower right, row by row
</p>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-number">number</em> <span class="dr-description">the frame just shown</span></p>
<p>remarks: if you want to check whether the animation is <strong>ended</strong>, test it against 0. when <code>animator.I</code> equals &#39;max frame index&#39;, the last frame is <em>just</em> being shown. when <code>animator.I</code> equals 0, the last frame had finished the whole duration of a frame and is <em>just</em> ended.
</p>
</div><div class="animator-rewind-section"><h3 id="animator.rewind" class="dr-method"><i class="dr-trixie">&#160;</i>animator.rewind()<a href="#animator.rewind" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 105 in the source" href="../animator.js#L105">&#x27ad;</a></h3>
<div class="extra" id="animator.rewind-extra"></div></div><div class="dr-method"><p>return to the first frame of animation sequence
</p>
</div><div class="animator-seek-section"><h3 id="animator.seek" class="dr-method"><i class="dr-trixie">&#160;</i>animator.seek(I)<a href="#animator.seek" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 89 in the source" href="../animator.js#L89">&#x27ad;</a></h3>
<div class="extra" id="animator.seek-extra"></div></div><p>seek to a particular index on animation sequence
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">I</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">sequence index</dd>
</dl>
</div><div class="animator-set-section"><h3 id="animator.set" class="dr-method"><i class="dr-trixie">&#160;</i>animator.set(set_config, [base])<a href="#animator.set" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 172 in the source" href="../animator.js#L172">&#x27ad;</a></h3>
<div class="extra" id="animator.set-extra"></div></div><div class="dr-method"><p>a helper function to constructor a set of animators
</p>
<p>animator set is a method. do <strong>not</strong> <code>var ani = new animator_set(..)</code>
</p>
<dl class="dr-parameters"><dt class="dr-param">set_config</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param">[base]</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p></p>
<p></p>
<pre class="javascript code"><code>set_config=
{
<i>'base'</i>: <span class="c">//<b>default</b> parameters, must be specified as base when calling animator_set</span>
{
	x:<span class="d">0</span>,y:<span class="d">0</span>,     <span class="c">//top left margin of the frames</span>
	w:L, h:L,    <span class="c">//width, height of a frame</span>
	gx:<span class="d">4</span>,gy:<span class="d">1</span>,   <span class="c">//define a gx*gy grid of frames</span>
	tar:<b>null</b>,    <span class="c">//target sprite</span>
},

<i>'standing'</i>:
{	<span class="c">//change only values you want to</span>
	x:<span class="d">0</span>,y:<span class="d">0</span>,     <span class="c">//top left margin of the frames</span>
	gx:<span class="d">4</span>,gy:<span class="d">1</span>    <span class="c">//define a gx*gy grid of frames</span>
} <span class="c">//,,,</span>
}
<b>var</b> set<span class="s"> = </span>animator.set(set_config,<i>'base'</i>)
</code></pre>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-object">object</em> <span class="dr-description">animator set</span></p>
</div><div class="animator-set_frame-section"><h3 id="animator.set_frame" class="dr-method"><i class="dr-trixie">&#160;</i>animator.set_frame(i)<a href="#animator.set_frame" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 117 in the source" href="../animator.js#L117">&#x27ad;</a></h3>
<div class="extra" id="animator.set_frame-extra"></div></div><div class="dr-method"><p>set to a particular frame
</p>
<dl class="dr-parameters"><dt class="dr-param">i</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">frame number on image</dd>
</dl>
<p>the top-left frame is 0
</p>
</div><div class="collision-section"><h2 id="collision" class="undefined"><i class="dr-trixie">&#160;</i>collision<a href="#collision" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 9 in the source" href="../collision.js#L9">&#x27ad;</a></h2>
<div class="extra" id="collision-extra"></div></div><p>collision detection function set
</p>
<p>all functions return <code>true</code> if intersect
</p>
<p><a href="../sample/collision.html">example</a>
</p>
<div class="collision-circle-section"><h3 id="collision.circle" class="dr-method"><i class="dr-trixie">&#160;</i>collision.circle(A,B)<a href="#collision.circle" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 132 in the source" href="../collision.js#L132">&#x27ad;</a></h3>
<div class="extra" id="collision.circle-extra"></div></div><p>circle-circle intersect test
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">A,B</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">in form <code>{center,radius}</code></dd>
</dl>
<p>where center is in form <code>{x,y}</code>, radius is a <code>number</code>
</p>
</div><div class="collision-line-section"><h3 id="collision.line" class="dr-method"><i class="dr-trixie">&#160;</i>collision.line(A,B,C,D)<a href="#collision.line" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 143 in the source" href="../collision.js#L143">&#x27ad;</a></h3>
<div class="extra" id="collision.line-extra"></div></div><p>line-line intersect test, true if line AB intersects CD
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">A,B,C,D</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">in form <code>{x,y}</code></dd>
</dl>
</div><div class="collision-point_in_rect-section"><h3 id="collision.point_in_rect" class="dr-method"><i class="dr-trixie">&#160;</i>collision.point_in_rect(P, R)<a href="#collision.point_in_rect" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 157 in the source" href="../collision.js#L157">&#x27ad;</a></h3>
<div class="extra" id="collision.point_in_rect-extra"></div></div><p>point in rectangle test
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">P</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">in form <code>{x,y}</code></dd>
<dt class="dr-param">R</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">in form <code>{left,top,right,bottom}</code></dd>
</dl>
</div><div class="collision-rect-section"><h3 id="collision.rect" class="dr-method"><i class="dr-trixie">&#160;</i>collision.rect(rect1, rect2)<a href="#collision.rect" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 22 in the source" href="../collision.js#L22">&#x27ad;</a></h3>
<div class="extra" id="collision.rect-extra"></div></div><p>rectangle-rectangle intersect test
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">rect1</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param">rect2</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">in form of <code>{left,top,right,bottom}</code></dd>
</dl>
</div><div class="collision-tri-section"><h3 id="collision.tri" class="dr-method"><i class="dr-trixie">&#160;</i>collision.tri(A,B)<a href="#collision.tri" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 65 in the source" href="../collision.js#L65">&#x27ad;</a></h3>
<div class="extra" id="collision.tri-extra"></div></div><p>triangle-triangle intersect test
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">A,B</dt>
<dd class="dr-type"><em class="dr-type-array">array</em></dd>
<dd class="dr-description">array of points in form <code>{x,y}</code></dd>
</dl>
</div><div class="combo detector-section"><h2 id="combo detector" class="undefined"><i class="dr-trixie">&#160;</i>combo detector<a href="#combo detector" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 8 in the source" href="../combodec.js#L8">&#x27ad;</a></h2>
<div class="extra" id="combo detector-extra"></div></div><p><li>listen key events and detect combo from a controller</li>
<li>maintains a clean sequence of pressed keys and fire events when combo is detected</li>
<li>LF2, KOF style combos</li>
<li>eliminating auto-repeated keys</li>
</p>
<div class="combodec-section"><h2 id="combodec" class="dr-class"><i class="dr-trixie">&#160;</i>combodec(controller, config, combo)<a href="#combodec" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 49 in the source" href="../combodec.js#L49">&#x27ad;</a></h2>
<div class="extra" id="combodec-extra"></div></div><div class="dr-class"><dl class="dr-parameters"><dt class="dr-param">controller</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">a reference to <a href="#controller" class="dr-link">controller</a></dd>
<dt class="dr-param">config</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param">combo</dt>
<dd class="dr-type"><em class="dr-type-array">array</em></dd>
<dd class="dr-description">combo definition</dd>
</dl>
<pre class="javascript code"><code><b>var</b> con_config=
{
	up:<i>'h'</i>,down:<i>'n'</i>,left:<i>'b'</i>,right:<i>'m'</i>,def:<i>'v'</i>,jump:<i>'f'</i>,att:<i>'d'</i>
	<span class="c">//,<i>'control name'</i>:<i>'control key'</i>,,,</span>
}
<b>var</b> con<span class="s"> = </span><b>new</b> controller(con_config);
<b>var</b> dec_config=
{
	timeout: <span class="d">30</span>,  <span class="c">//[optional] time before clearing the sequence buffer <b>in</b> terms of frames</span>
	comboout: <span class="d">15</span>, <span class="c">//[optional] the max time interval between keys to make a combo,</span>
		<span class="c">//an interrupt is inserted when comboout expires</span>
	clear_on_combo: <b>true</b>, <span class="c">//[optional] <b>if</b> <b>true</b>, will clear the sequence buffer when a combo occur</span>
	callback: dec_callback, <span class="c">//callback <b>function</b> when combo detected</span>
	rp: {up:<span class="d">1</span>,down:<span class="d">1</span>,left:<span class="d">2</span>,right:<span class="d">2</span>,def:<span class="d">3</span>,jump:<span class="d">1</span>,att:<span class="d">5</span>}
		<span class="c">//[optional] max repeat count of each key, unlimited <b>if</b> not stated</span>
};
<b>var</b> combo<span class="s"> = </span>[
{
	name: <i>'blast'</i>,	<span class="c">//combo name</span>
	seq:  [<i>'def'</i>,<i>'right'</i>,<i>'att'</i>], <span class="c">//array of key sequence</span>
	maxtime: <span class="d">10</span> <span class="c">//[optional] the max allowed time difference between the first and last key input</span>
	clear_on_combo: <b>false</b>, <span class="c">//[optional] override generic config</span>
} <span class="c">//,,,</span>
];
<b>var</b> dec<span class="s"> = </span><b>new</b> combodec ( con, dec_config, combo);
<b>function</b> dec_callback(combo)
{
	alert(combo);
}
</code></pre>
<p></p>
<p><a href="../sample/combo.html">example</a>
</p>
</div><div class="combodec-clear_seq-section"><h3 id="combodec.clear_seq" class="dr-method"><i class="dr-trixie">&#160;</i>combodec.clear_seq()<a href="#combodec.clear_seq" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 169 in the source" href="../combodec.js#L169">&#x27ad;</a></h3>
<div class="extra" id="combodec.clear_seq-extra"></div></div><p>clear the key sequence
</p>
<div class="dr-method"><p>normally you would not need to call this manually
</p>
</div><div class="combodec-combo-section"><h3 id="combodec.combo" class="dr-property"><i class="dr-trixie">&#160;</i>combodec.combo<a href="#combodec.combo" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 96 in the source" href="../combodec.js#L96">&#x27ad;</a></h3>
<div class="extra" id="combodec.combo-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-array">array</em></dd>
<dd class="dr-description">combo list</dd>
</dl>
<div class="dr-property"></div><div class="combodec-comboout-section"><h3 id="combodec.comboout" class="dr-property"><i class="dr-trixie">&#160;</i>combodec.comboout<a href="#combodec.comboout" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 68 in the source" href="../combodec.js#L68">&#x27ad;</a></h3>
<div class="extra" id="combodec.comboout-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">when to interrupt the current combo</dd>
</dl>
<div class="dr-property"></div><div class="combodec-con-section"><h3 id="combodec.con" class="dr-property"><i class="dr-trixie">&#160;</i>combodec.con<a href="#combodec.con" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 74 in the source" href="../combodec.js#L74">&#x27ad;</a></h3>
<div class="extra" id="combodec.con-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">parent controller</dd>
</dl>
<div class="dr-property"></div><div class="combodec-config-section"><h3 id="combodec.config" class="dr-property"><i class="dr-trixie">&#160;</i>combodec.config<a href="#combodec.config" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 90 in the source" href="../combodec.js#L90">&#x27ad;</a></h3>
<div class="extra" id="combodec.config-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<div class="dr-property"></div><div class="combodec-frame-section"><h3 id="combodec.frame" class="dr-method"><i class="dr-trixie">&#160;</i>combodec.frame()<a href="#combodec.frame" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 181 in the source" href="../combodec.js#L181">&#x27ad;</a></h3>
<div class="extra" id="combodec.frame-extra"></div></div><p>a tick of time
</p>
<div class="dr-method"></div><div class="combodec-key-section"><h3 id="combodec.key" class="dr-method"><i class="dr-trixie">&#160;</i>combodec.key(k, down)<a href="#combodec.key" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 108 in the source" href="../combodec.js#L108">&#x27ad;</a></h3>
<div class="extra" id="combodec.key-extra"></div></div><p>supply keys to combodec
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">k</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">key name</dd>
<dt class="dr-param">down</dt>
<dd class="dr-type"><em class="dr-type-boolean">boolean</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p>note that it receives key name, i.e. <code>up</code>,<code>down</code> rather than <code>w</code>,<code>s</code>
</p>
</div><div class="combodec-seq-section"><h3 id="combodec.seq" class="dr-property"><i class="dr-trixie">&#160;</i>combodec.seq<a href="#combodec.seq" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 84 in the source" href="../combodec.js#L84">&#x27ad;</a></h3>
<div class="extra" id="combodec.seq-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-array">array</em></dd>
<dd class="dr-description">the key input sequence. note that combodec logs key names rather than key stroke,</dd>
</dl>
<p>i.e. <code>up</code>,<code>down</code> rather than <code>w</code>,<code>s</code>
</p>
<dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">each is <code>{k:key,t:time}</code></dd>
</dl>
<p></p>
<p>will be cleared regularly as defined by <code>config.timeout</code> or <code>config.clear_on_combo</code>
</p>
<div class="dr-property"></div><div class="combodec-time-section"><h3 id="combodec.time" class="dr-property"><i class="dr-trixie">&#160;</i>combodec.time<a href="#combodec.time" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 56 in the source" href="../combodec.js#L56">&#x27ad;</a></h3>
<div class="extra" id="combodec.time-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">current time</dd>
</dl>
<div class="dr-property"></div><div class="combodec-timeout-section"><h3 id="combodec.timeout" class="dr-property"><i class="dr-trixie">&#160;</i>combodec.timeout<a href="#combodec.timeout" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 62 in the source" href="../combodec.js#L62">&#x27ad;</a></h3>
<div class="extra" id="combodec.timeout-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">when to clear the sequence buffer</dd>
</dl>
<div class="dr-property"></div><div class="control_player-section"><h2 id="control_player" class="dr-class"><i class="dr-trixie">&#160;</i>control_player(control_config, record)<a href="#control_player" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 73 in the source" href="../controller-recorder.js#L73">&#x27ad;</a></h2>
<div class="extra" id="control_player-extra"></div></div><p>control player to playback activity of a controller
</p>
<div class="dr-class"><p>compatible with <a href="#controller" class="dr-link">controller</a> and please refer to controller for specification
</p>
<dl class="dr-parameters"><dt class="dr-param">control_config</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">config used for controller</dd>
<dt class="dr-param">record</dt>
<dd class="dr-type"><em class="dr-type-array">array</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p><a href="http://tyt2y3.github.com/LFrelease/demo/milestone/2012June-min.html">example</a>
</p>
</div><div class="control_player-child-section"><h3 id="control_player.child" class="dr-property"><i class="dr-trixie">&#160;</i>control_player.child<a href="#control_player.child" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 91 in the source" href="../controller-recorder.js#L91">&#x27ad;</a></h3>
<div class="extra" id="control_player.child-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-array">array</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<div class="dr-property"></div><div class="control_player-clear_states-section"><h3 id="control_player.clear_states" class="dr-method"><i class="dr-trixie">&#160;</i>control_player.clear_states()<a href="#control_player.clear_states" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 134 in the source" href="../controller-recorder.js#L134">&#x27ad;</a></h3>
<div class="extra" id="control_player.clear_states-extra"></div></div><div class="dr-method"></div><div class="control_player-fetch-section"><h3 id="control_player.fetch" class="dr-method"><i class="dr-trixie">&#160;</i>control_player.fetch()<a href="#control_player.fetch" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 115 in the source" href="../controller-recorder.js#L115">&#x27ad;</a></h3>
<div class="extra" id="control_player.fetch-extra"></div></div><div class="dr-method"></div><div class="control_player-flush-section"><h3 id="control_player.flush" class="dr-method"><i class="dr-trixie">&#160;</i>control_player.flush()<a href="#control_player.flush" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 139 in the source" href="../controller-recorder.js#L139">&#x27ad;</a></h3>
<div class="extra" id="control_player.flush-extra"></div></div><div class="dr-method"></div><div class="control_player-frame-section"><h3 id="control_player.frame" class="dr-method"><i class="dr-trixie">&#160;</i>control_player.frame()<a href="#control_player.frame" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 105 in the source" href="../controller-recorder.js#L105">&#x27ad;</a></h3>
<div class="extra" id="control_player.frame-extra"></div></div><p>a tick of time
</p>
<div class="dr-method"></div><div class="control_player-state-section"><h3 id="control_player.state" class="dr-property"><i class="dr-trixie">&#160;</i>control_player.state<a href="#control_player.state" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 83 in the source" href="../controller-recorder.js#L83">&#x27ad;</a></h3>
<div class="extra" id="control_player.state-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<div class="dr-property"></div><div class="control_player-sync-section"><h3 id="control_player.sync" class="dr-property"><i class="dr-trixie">&#160;</i>control_player.sync<a href="#control_player.sync" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 97 in the source" href="../controller-recorder.js#L97">&#x27ad;</a></h3>
<div class="extra" id="control_player.sync-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-boolean">boolean</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<div class="dr-property"></div><div class="control_recorder-section"><h2 id="control_recorder" class="dr-class"><i class="dr-trixie">&#160;</i>control_recorder(target_controller)<a href="#control_recorder" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 15 in the source" href="../controller-recorder.js#L15">&#x27ad;</a></h2>
<div class="extra" id="control_recorder-extra"></div></div><div class="dr-class"><p>controller recorder to record activity of a controller
</p>
<dl class="dr-parameters"><dt class="dr-param">target_controller</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">target <a href="#controller" class="dr-link">controller</a></dd>
</dl>
<p>record format is:
</p>
<pre class="javascript code"><code>[
<span class="c">//   { time,    key,    down }</span>
     {<i>"t"</i>:<span class="d">13</span>,<i>"k"</i>:<i>"left"</i>,<i>"d"</i>:<span class="d">1</span>} <span class="c">//,,,</span>
]
</code></pre>
</div><div class="control_recorder-export_str-section"><h3 id="control_recorder.export_str" class="dr-method"><i class="dr-trixie">&#160;</i>control_recorder.export_str()<a href="#control_recorder.export_str" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 49 in the source" href="../controller-recorder.js#L49">&#x27ad;</a></h3>
<div class="extra" id="control_recorder.export_str-extra"></div></div><p>export to JSON
</p>
<div class="dr-method"><p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-string">string</em> <span class="dr-description">JSON</span></p>
</div><div class="control_recorder-frame-section"><h3 id="control_recorder.frame" class="dr-method"><i class="dr-trixie">&#160;</i>control_recorder.frame()<a href="#control_recorder.frame" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 39 in the source" href="../controller-recorder.js#L39">&#x27ad;</a></h3>
<div class="extra" id="control_recorder.frame-extra"></div></div><p>a tick of time
</p>
<div class="dr-method"><p>for details see <a href="http://project--f.blogspot.hk/2013/04/time-model-and-determinism.html">http://project--f.blogspot.hk/2013/04/time-model-and-determinism.html</a>
</p>
</div><div class="control_recorder-key-section"><h3 id="control_recorder.key" class="dr-method"><i class="dr-trixie">&#160;</i>control_recorder.key(k, down)<a href="#control_recorder.key" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 29 in the source" href="../controller-recorder.js#L29">&#x27ad;</a></h3>
<div class="extra" id="control_recorder.key-extra"></div></div><p>supply keys to control_recorder
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">k</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">key name</dd>
<dt class="dr-param">down</dt>
<dd class="dr-type"><em class="dr-type-boolean">boolean</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
</div><div class="controller-section"><h2 id="controller" class="dr-class"><i class="dr-trixie">&#160;</i>controller(config)<a href="#controller" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 54 in the source" href="../controller.js#L54">&#x27ad;</a></h2>
<div class="extra" id="controller-extra"></div></div><p>keyboard controller
<li>controllers for multiple players on the same keyboard</li>
<li>maintains a table of key states</li>
<li>generate key events for child controllers</li>
<li>buffered mode: buffer inputs and fetch only once a loop</li>
<li>never drops keys</li>
see <a href="http://project--f.blogspot.hk/2012/11/keyboard-controller.html">http://project--f.blogspot.hk/2012/11/keyboard-controller.html</a> for technical explaination
</p>
<div class="dr-class"><dl class="dr-parameters"><dt class="dr-param">config</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<pre class="javascript code"><code><b>var</b> con_config=
{
	up:<i>'h'</i>,down:<i>'n'</i>,left:<i>'b'</i>,right:<i>'m'</i>,def:<i>'v'</i>,jump:<i>'f'</i>,att:<i>'d'</i>
	<span class="c">//,<i>'control name'</i>:<i>'control key'</i>,,,</span>
}
<b>var</b> con<span class="s"> = </span><b>new</b> controller(con_config);
</code></pre>
</div><div class="controller-block-section"><h3 id="controller.block" class="dr-method"><i class="dr-trixie">&#160;</i>controller.block(block)<a href="#controller.block" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 132 in the source" href="../controller.js#L132">&#x27ad;</a></h3>
<div class="extra" id="controller.block-extra"></div></div><ol class="dr-json"><li>static function</ol>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">block</dt>
<dd class="dr-type"><em class="dr-type-bool">bool</em></dd>
<dd class="dr-description">if true, will block all other keydown/up event listeners</dd>
</dl>
</div><div class="controller-buf-section"><h3 id="controller.buf" class="dr-property"><i class="dr-trixie">&#160;</i>controller.buf<a href="#controller.buf" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 104 in the source" href="../controller.js#L104">&#x27ad;</a></h3>
<div class="extra" id="controller.buf-extra"></div></div><div class="dr-property"><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-array">array</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p>the array of keyname of buffered key input
</p>
</div><div class="controller-child-section"><h3 id="controller.child" class="dr-property"><i class="dr-trixie">&#160;</i>controller.child<a href="#controller.child" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 89 in the source" href="../controller.js#L89">&#x27ad;</a></h3>
<div class="extra" id="controller.child-extra"></div></div><div class="dr-property"><p>child systems that has the method <code>key(name,down)</code>
</p>
<p>push a child into this array to listen to key events
</p>
<p>see <a href="#combodec.key" class="dr-link">combodec.key</a>
</p>
</div><div class="controller-clear_states-section"><h3 id="controller.clear_states" class="dr-method"><i class="dr-trixie">&#160;</i>controller.clear_states()<a href="#controller.clear_states" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 196 in the source" href="../controller.js#L196">&#x27ad;</a></h3>
<div class="extra" id="controller.clear_states-extra"></div></div><p>clear the key state table
</p>
<div class="dr-method"></div><div class="controller-config-section"><h3 id="controller.config" class="dr-property"><i class="dr-trixie">&#160;</i>controller.config<a href="#controller.config" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 72 in the source" href="../controller.js#L72">&#x27ad;</a></h3>
<div class="extra" id="controller.config-extra"></div></div><div class="dr-property"><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p>note that controller still keeps a reference to the config object
</p>
</div><div class="controller-destroy-section"><h3 id="controller.destroy" class="dr-method"><i class="dr-trixie">&#160;</i>controller.destroy()<a href="#controller.destroy" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 142 in the source" href="../controller.js#L142">&#x27ad;</a></h3>
<div class="extra" id="controller.destroy-extra"></div></div><div class="dr-method"><p>destroy a controller; do not listen to key events any more
</p>
</div><div class="controller-fetch-section"><h3 id="controller.fetch" class="dr-method"><i class="dr-trixie">&#160;</i>controller.fetch()<a href="#controller.fetch" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 206 in the source" href="../controller.js#L206">&#x27ad;</a></h3>
<div class="extra" id="controller.fetch-extra"></div></div><p>fetch for inputs received since the last fetch, will flush buffer afterwards
</p>
<div class="dr-method"></div><div class="controller-flush-section"><h3 id="controller.flush" class="dr-method"><i class="dr-trixie">&#160;</i>controller.flush()<a href="#controller.flush" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 224 in the source" href="../controller.js#L224">&#x27ad;</a></h3>
<div class="extra" id="controller.flush-extra"></div></div><p>flush the buffer manually
</p>
<div class="dr-method"></div><div class="controller-key-section"><h3 id="controller.key" class="dr-method"><i class="dr-trixie">&#160;</i>controller.key(e, down)<a href="#controller.key" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 166 in the source" href="../controller.js#L166">&#x27ad;</a></h3>
<div class="extra" id="controller.key-extra"></div></div><div class="dr-method"><p>supply events to controller
</p>
<p>master controller will do this automatically
</p>
<dl class="dr-parameters"><dt class="dr-param">e</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">keycode</dd>
<dt class="dr-param">down</dt>
<dd class="dr-type"><em class="dr-type-boolean">boolean</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
</div><div class="controller-keycode-section"><h3 id="controller.keycode" class="dr-property"><i class="dr-trixie">&#160;</i>controller.keycode<a href="#controller.keycode" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 79 in the source" href="../controller.js#L79">&#x27ad;</a></h3>
<div class="extra" id="controller.keycode-extra"></div></div><div class="dr-property"><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p>the keycode for each key
</p>
</div><div class="controller-keycode_to_keyname-section"><h3 id="controller.keycode_to_keyname" class="dr-method"><i class="dr-trixie">&#160;</i>controller.keycode_to_keyname(keycode)<a href="#controller.keycode_to_keyname" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 306 in the source" href="../controller.js#L306">&#x27ad;</a></h3>
<div class="extra" id="controller.keycode_to_keyname-extra"></div></div><p>convert keycode back to keyname
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">keycode</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-string">string</em> <span class="dr-description">keyname</span></p>
</div><div class="controller-keyname_to_keycode-section"><h3 id="controller.keyname_to_keycode" class="dr-method"><i class="dr-trixie">&#160;</i>controller.keyname_to_keycode(keyname)<a href="#controller.keyname_to_keycode" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 238 in the source" href="../controller.js#L238">&#x27ad;</a></h3>
<div class="extra" id="controller.keyname_to_keycode-extra"></div></div><p>convert keyname to keycode
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">keyname</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-number">number</em> <span class="dr-description">keycode </span></p>
<p>note that some keycode is not the same across all browsers, 
for details consult <a href="http://www.quirksmode.org/js/keys.html">http://www.quirksmode.org/js/keys.html</a>
</p>
</div><div class="controller-state-section"><h3 id="controller.state" class="dr-property"><i class="dr-trixie">&#160;</i>controller.state<a href="#controller.state" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 65 in the source" href="../controller.js#L65">&#x27ad;</a></h3>
<div class="extra" id="controller.state-extra"></div></div><div class="dr-property"><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p>table of key states
</p>
<p>note that keys are indexed by their names, i.e. <code>up</code>,<code>down</code> rather than <code>w</code>,<code>s</code>
</p>
<pre class="javascript code"><code>con.state.down <span class="c">//check <b>if</b> the `down` key is pressed down</span>
</code></pre>
</div><div class="controller-sync-section"><h3 id="controller.sync" class="dr-property"><i class="dr-trixie">&#160;</i>controller.sync<a href="#controller.sync" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 97 in the source" href="../controller.js#L97">&#x27ad;</a></h3>
<div class="extra" id="controller.sync-extra"></div></div><div class="dr-property"><p>shall always be true
</p>
<p>all key events are buffered, and must be <code>fetch</code> manually
</p>
</div><div class="controller-type-section"><h3 id="controller.type" class="dr-property"><i class="dr-trixie">&#160;</i>controller.type<a href="#controller.type" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 155 in the source" href="../controller.js#L155">&#x27ad;</a></h3>
<div class="extra" id="controller.type-extra"></div></div><div class="dr-property"><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p>value=<code>&#39;keyboard&#39;</code>
</p>
</div><div class="controller-zppendix-section"><h3 id="controller.zppendix" class="undefined"><i class="dr-trixie">&#160;</i>controller.zppendix<a href="#controller.zppendix" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 124 in the source" href="../controller.js#L124">&#x27ad;</a></h3>
<div class="extra" id="controller.zppendix-extra"></div></div><p>on the other hand, there can be other controllers with compatible definition and behavior,
(e.g. touch controller, AI controller, network player controller, record playback controller)
<li>has the properties <code>state</code>, <code>config</code>, <code>child</code></li>
<li>behavior: call the <code>key</code> method of every member of <code>child</code> when keys arrive</li>
<li>has the method <code>clear_states</code>, <code>fetch</code> and <code>flush</code></li>
<li>behavior: the controller should buffer key inputs, and only dispatch to child when <code>fetch</code> is called, and flush the buffer when <code>flush</code> is called</li>
</p>
<div class="controller_changer-section"><h2 id="controller_changer" class="dr-class"><i class="dr-trixie">&#160;</i>controller_changer(config)<a href="#controller_changer" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 19 in the source" href="../controller-changer.js#L19">&#x27ad;</a></h2>
<div class="extra" id="controller_changer-extra"></div></div><div class="dr-class"><p>a simplistic key changer for <a href="#controller" class="dr-link">controller</a>
</p>
<dl class="dr-parameters"><dt class="dr-param">config</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<pre class="javascript code"><code>config=
{
div, <span class="c">//DOM node</span>
controller, <span class="c">//can be a single F.controller or an array of F.controllers</span>
	<span class="c">//<b>if</b> it is an array, will create player1, player2 etc</span>
onchange <span class="c">//<b>function</b> be called on change key</span>
}
</code></pre>
</div><div class="css-section"><h2 id="css" class="undefined"><i class="dr-trixie">&#160;</i>css<a href="#css" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 13 in the source" href="../css.js#L13">&#x27ad;</a></h2>
<div class="extra" id="css-extra"></div></div><p>css is a requirejs plugin that loads a css file and inject it into a page.
</p>
<p>note that this loader will return immediately,
regardless of whether the browser had finished parsing the stylesheet.
</p>
<p>this css loader is implemented for file optimization and depedency managment
</p>
<pre class="javascript code"><code>requirejs([<i>'css!style.css'</i>,<i>'css!more.css'</i>],<b>function</b>(css1,css2){
console.log(css1+<i>','</i>+css2); <span class="c">//<b>true</b> <b>if</b> successfully loaded</span>
});
</code></pre>
<div class="effects_pool-section"><h2 id="effects_pool" class="dr-class"><i class="dr-trixie">&#160;</i>effects_pool(config)<a href="#effects_pool" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 54 in the source" href="../effects-pool.js#L54">&#x27ad;</a></h2>
<div class="extra" id="effects_pool-extra"></div></div><p>an effects pool manages a pool of effect instances, which is particularly useful in creating game effects.
say, you have an explosion visual effect that would be created 30 times per second
, that frequent object constructions create an overhead.
</p>
<p><li>effect class should have methods <code>born</code> and <code>die</code></li>
<li>each effect instance will be injected a <code>parent</code> property</li>
 which is a reference to the containing effects pool,
 so that an instance can die spontaneously
<li>when the pool is full, it can optionally expands</li>
</p>
<p>there are two flavors:
</p>
<p><strong>circular=true</strong>
<li>all <code>effect</code> instances have the same life time, starting by <code>born</code> and end upon <code>die</code></li>
<li>effect that born earlier should always die earlier</li>
<li>the most efficient object management</li>
</p>
<p><strong>circular=false</strong>
<li>each <code>effect</code> instance has different life span</li>
<li>must specify target when <code>die</code> is called</li>
<li>less efficient object management</li>
</p>
<div class="dr-class"><dl class="dr-parameters"><dt class="dr-param">config</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p>{
</p>
<dl class="dr-parameters"><dt class="dr-param"> circular</dt>
<dd class="dr-type"><em class="dr-type-bool">bool</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param"> init_size</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param"> batch_size</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param"> max_size</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param"> construct</dt>
<dd class="dr-type"><em class="dr-type-function">function</em></dd>
<dd class="dr-description">should return newly created instances of effect</dd>
</dl>
<p>}
</p>
<pre class="javascript code"><code><b>var</b> ef_config=
{
 circular: <b>true</b>,
	init_size: <span class="d">5</span>,
	batch_size: <span class="d">5</span>,
	max_size: <span class="d">100</span>,
	construct: <b>function</b>()
	{
		<b>return</b> <b>new</b> box_effect(<span class="d">1</span>);
	}
};
<b>var</b> effects<span class="s"> = </span><b>new</b> Effects_pool(ef_config);
</code></pre>
<p><a href="../sample/effects-pool.html">example</a>
</p>
<iframe src="../sample/effects-pool.html" width="800" height="100"></iframe>
</div><div class="effects_pool-call_each-section"><h3 id="effects_pool.call_each" class="dr-method"><i class="dr-trixie">&#160;</i>effects_pool.call_each(fun_name, arg)<a href="#effects_pool.call_each" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 208 in the source" href="../effects-pool.js#L208">&#x27ad;</a></h3>
<div class="extra" id="effects_pool.call_each-extra"></div></div><div class="dr-method"><p>call a method of each active instance
</p>
<p>(if the pool is circular, in the order of oldest to youngest)
</p>
<dl class="dr-parameters"><dt class="dr-param">fun_name</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">method name</dd>
<dt class="dr-param">arg</dt>
<dd class="dr-type"><em class="dr-type-any">any</em></dd>
<dd class="dr-description">extra args will be passed through</dd>
</dl>
</div><div class="effects_pool-create-section"><h3 id="effects_pool.create" class="dr-method"><i class="dr-trixie">&#160;</i>effects_pool.create(arg)<a href="#effects_pool.create" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 91 in the source" href="../effects-pool.js#L91">&#x27ad;</a></h3>
<div class="extra" id="effects_pool.create-extra"></div></div><div class="dr-method"><p>activate an effect by calling <code>born</code>
</p>
<dl class="dr-parameters"><dt class="dr-param">arg</dt>
<dd class="dr-type"><em class="dr-type-any">any</em></dd>
<dd class="dr-description">args will be passed through to <code>born</code></dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-boolean">boolean</em> <span class="dr-description">false if not okay</span></p>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-object">object</em> <span class="dr-description">reference to the new born effect if okay</span></p>
<p class="header">Details
<p>if the pool is full (all instances of effects are active) and <strong>after</strong> expanding the size is still smaller than or equal to <code>config.max_size</code>, will expand the pool by size <code>config.batch_size</code>
</p>
<p>if the pool is full and not allowed to expand, return false immediately
</p>
</div><div class="effects_pool-die-section"><h3 id="effects_pool.die" class="dr-method"><i class="dr-trixie">&#160;</i>effects_pool.die(target, arg)<a href="#effects_pool.die" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 139 in the source" href="../effects-pool.js#L139">&#x27ad;</a></h3>
<div class="extra" id="effects_pool.die-extra"></div></div><div class="dr-method"><p>killing an effect instance
</p>
<dl class="dr-parameters"><dt class="dr-param">target</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">if pool is circular, this parameter is ignored, and the oldest effect instance will be killed</dd>
<dt class="dr-param">arg</dt>
<dd class="dr-type"><em class="dr-type-any">any</em></dd>
<dd class="dr-description">extra args will be passed through to <code>die</code></dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-object">object</em> <span class="dr-description">a reference to the instance that died</span></p>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-undefined">undefined</em> <span class="dr-description">if there is actually no active effect</span></p>
</div><div class="effects_pool-for_each-section"><h3 id="effects_pool.for_each" class="dr-method"><i class="dr-trixie">&#160;</i>effects_pool.for_each(fun)<a href="#effects_pool.for_each" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 172 in the source" href="../effects-pool.js#L172">&#x27ad;</a></h3>
<div class="extra" id="effects_pool.for_each-extra"></div></div><div class="dr-method"><p>iterate through all active instances.
</p>
<p>(if the pool is circular, in the order of oldest to youngest)
</p>
<dl class="dr-parameters"><dt class="dr-param">fun</dt>
<dd class="dr-type"><em class="dr-type-function">function</em></dd>
<dd class="dr-description">iterator function, if return value is &#39;break&#39;, will break the loop</dd>
</dl>
<pre class="javascript code"><code>crpool.for_each(<b>function</b>(e)
{
	e.hi();
})
</code></pre>
</div><div class="math-section"><h2 id="math" class="undefined"><i class="dr-trixie">&#160;</i>math<a href="#math" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 5 in the source" href="../math.js#L5">&#x27ad;</a></h2>
<div class="extra" id="math-extra"></div></div><p>math related functions
</p>
<div class="math-add-section"><h3 id="math.add" class="dr-method"><i class="dr-trixie">&#160;</i>math.add(A, B)<a href="#math.add" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 97 in the source" href="../math.js#L97">&#x27ad;</a></h3>
<div class="extra" id="math.add-extra"></div></div><div class="dr-method"><p>A+B
</p>
<dl class="dr-parameters"><dt class="dr-param">A, B</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">points in <code>{x,y}</code></dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-object">object</em> <span class="dr-description">point in <code>{x,y}</code></span></p>
</div><div class="math-bezier2-section"><h3 id="math.bezier2" class="dr-method"><i class="dr-trixie">&#160;</i>math.bezier2(A, C, B)<a href="#math.bezier2" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 64 in the source" href="../math.js#L64">&#x27ad;</a></h3>
<div class="extra" id="math.bezier2-extra"></div></div><div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">A, C, B</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">points in <code>{x,y}</code></dd>
</dl>
<p>here <code>C</code> means the control point
</p>
<dl class="dr-parameters"><dt class="dr-param">steps</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-object">object</em> <span class="dr-description">array of points on curve</span></p>
</div><div class="math-distance-section"><h3 id="math.distance" class="dr-method"><i class="dr-trixie">&#160;</i>math.distance(A, B)<a href="#math.distance" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 142 in the source" href="../math.js#L142">&#x27ad;</a></h3>
<div class="extra" id="math.distance-extra"></div></div><p>|AB|
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">A, B</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">points in <code>{x,y}</code></dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-number">number</em> <span class="dr-description">length</span></p>
</div><div class="math-inbetween-section"><h3 id="math.inbetween" class="dr-method"><i class="dr-trixie">&#160;</i>math.inbetween(x, L, R)<a href="#math.inbetween" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 18 in the source" href="../math.js#L18">&#x27ad;</a></h3>
<div class="extra" id="math.inbetween-extra"></div></div><div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">x, L, R</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-boolean">boolean</em> <span class="dr-description">true if x is in between L and R</span></p>
</div><div class="math-intersect-section"><h3 id="math.intersect" class="dr-method"><i class="dr-trixie">&#160;</i>math.intersect(P1, P2, P3, P4)<a href="#math.intersect" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 201 in the source" href="../math.js#L201">&#x27ad;</a></h3>
<div class="extra" id="math.intersect-extra"></div></div><p>line-line intersection
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">P1</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">point on line 1</dd>
<dt class="dr-param">P2</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">point on line 1</dd>
<dt class="dr-param">P3</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">point on line 2</dd>
<dt class="dr-param">P4</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">point on line 2</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-object">object</em> <span class="dr-description">return the intersection point of P1-P2 with P3-P4</span></p>
<p>reference: <a href="http://paulbourke.net/geometry/lineline2d/">http://paulbourke.net/geometry/lineline2d/</a>
</p>
</div><div class="math-length-section"><h3 id="math.length" class="dr-method"><i class="dr-trixie">&#160;</i>math.length(A)<a href="#math.length" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 131 in the source" href="../math.js#L131">&#x27ad;</a></h3>
<div class="extra" id="math.length-extra"></div></div><p>|A|
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">A</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">point</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-number">number</em> <span class="dr-description">length</span></p>
</div><div class="math-negative-section"><h3 id="math.negative" class="dr-method"><i class="dr-trixie">&#160;</i>math.negative(A)<a href="#math.negative" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 153 in the source" href="../math.js#L153">&#x27ad;</a></h3>
<div class="extra" id="math.negative-extra"></div></div><p>-A
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">A</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">point</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-object">object</em> <span class="dr-description">point</span></p>
</div><div class="math-negligible-section"><h3 id="math.negligible" class="dr-method"><i class="dr-trixie">&#160;</i>math.negligible(M)<a href="#math.negligible" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 47 in the source" href="../math.js#L47">&#x27ad;</a></h3>
<div class="extra" id="math.negligible-extra"></div></div><div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">M</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-boolean">boolean</em> <span class="dr-description">true if M is very very small, with absolute value smaller than ~0.00000001</span></p>
</div><div class="math-normalize-section"><h3 id="math.normalize" class="dr-method"><i class="dr-trixie">&#160;</i>math.normalize(A)<a href="#math.normalize" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 164 in the source" href="../math.js#L164">&#x27ad;</a></h3>
<div class="extra" id="math.normalize-extra"></div></div><p>A/|A|
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">A</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">point</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-object">object</em> <span class="dr-description">point</span></p>
</div><div class="math-perpen-section"><h3 id="math.perpen" class="dr-method"><i class="dr-trixie">&#160;</i>math.perpen(A)<a href="#math.perpen" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 174 in the source" href="../math.js#L174">&#x27ad;</a></h3>
<div class="extra" id="math.perpen-extra"></div></div><p>perpendicular; anti-clockwise 90 degrees, assume origin in lower left
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">A</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">point</dd>
</dl>
</div><div class="math-round_d2-section"><h3 id="math.round_d2" class="dr-method"><i class="dr-trixie">&#160;</i>math.round_d2(I)<a href="#math.round_d2" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 37 in the source" href="../math.js#L37">&#x27ad;</a></h3>
<div class="extra" id="math.round_d2-extra"></div></div><div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">I</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-number">number</em> <span class="dr-description">round to decimal 2</span></p>
</div><div class="math-scale-section"><h3 id="math.scale" class="dr-method"><i class="dr-trixie">&#160;</i>math.scale(A, t)<a href="#math.scale" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 120 in the source" href="../math.js#L120">&#x27ad;</a></h3>
<div class="extra" id="math.scale-extra"></div></div><p>A*t
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">A</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">point</dd>
<dt class="dr-param">t</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-object">object</em> <span class="dr-description">point</span></p>
</div><div class="math-signed_area-section"><h3 id="math.signed_area" class="dr-method"><i class="dr-trixie">&#160;</i>math.signed_area(A, B, C)<a href="#math.signed_area" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 185 in the source" href="../math.js#L185">&#x27ad;</a></h3>
<div class="extra" id="math.signed_area-extra"></div></div><div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">A, B, C</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">points</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-number">number</em> <span class="dr-description">signed area</span></p>
<p>the sign indicate clockwise/anti-clockwise points order
</p>
</div><div class="math-sub-section"><h3 id="math.sub" class="dr-method"><i class="dr-trixie">&#160;</i>math.sub(A, B)<a href="#math.sub" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 108 in the source" href="../math.js#L108">&#x27ad;</a></h3>
<div class="extra" id="math.sub-extra"></div></div><p>A-B
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">A, B</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">points in <code>{x,y}</code></dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-object">object</em> <span class="dr-description">point in <code>{x,y}</code></span></p>
</div><div class="network-section"><h2 id="network" class="undefined"><i class="dr-trixie">&#160;</i>network<a href="#network" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 5 in the source" href="../network.js#L5">&#x27ad;</a></h2>
<div class="extra" id="network-extra"></div></div><p>PvP networking library, to be used on top of F.Lobby
</p>
<div class="network-clearInterval-section"><h3 id="network.clearInterval" class="dr-method"><i class="dr-trixie">&#160;</i>network.clearInterval(timer_id)<a href="#network.clearInterval" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 63 in the source" href="../network.js#L63">&#x27ad;</a></h3>
<div class="extra" id="network.clearInterval-extra"></div></div><div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">timer_id</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p></p>
<p></p>
</div><div class="network-messenger-section"><h3 id="network.messenger" class="dr-property"><i class="dr-trixie">&#160;</i>network.messenger<a href="#network.messenger" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 77 in the source" href="../network.js#L77">&#x27ad;</a></h3>
<div class="extra" id="network.messenger-extra"></div></div><div class="dr-property"><p>in-game messenging
</p>
<p>this property is like:
</p>
<dl class="dr-parameters"><dt class="dr-param">send</dt>
<dd class="dr-type"><em class="dr-type-function">function</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<pre class="javascript code"><code>network.messenger.send(<i>'hello'</i>);
</code></pre>
<dl class="dr-parameters"><dt class="dr-param">receiver</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">you provide this object</dd>
</dl>
<pre class="javascript code"><code>network.messenger.receiver<span class="s"> = </span>{
	onmessage: <b>function</b>(mess) {}
};
</code></pre>
</div><div class="network-setInterval-section"><h3 id="network.setInterval" class="dr-method"><i class="dr-trixie">&#160;</i>network.setInterval(frame, interval)<a href="#network.setInterval" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 56 in the source" href="../network.js#L56">&#x27ad;</a></h3>
<div class="extra" id="network.setInterval-extra"></div></div><div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">frame</dt>
<dd class="dr-type"><em class="dr-type-function">function</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param">interval</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">in miliseconds</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-number">number</em> <span class="dr-description">timer_id</span></p>
<p class="header">synchronized frame
<p>Each frame call is synchronized across the two peers, with facility provided to maintain two identical game worlds. If network condition permits, the target framerate will be maintained.
</p>
<p><code>frame</code> will be called with:
</p>
<dl class="dr-parameters"><dt class="dr-param">time</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">integer</dd>
<dt class="dr-param">data</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">data sent from the other side</dd>
<dt class="dr-param">send</dt>
<dd class="dr-type"><em class="dr-type-function">function</em></dd>
<dd class="dr-description">send data to the other side</dd>
</dl>
<p>example:
</p>
<pre class="javascript code"><code><b>function</b> frame(time, data, send)
{
	<b>if</b>( time===<span class="d">0</span>) {
		<span class="c">// start</span>
	} <b>else</b> {
		<span class="c">// <b>do</b> something <b>with</b> data</span>
	}
	<span class="c">//send synchronization data</span>
	send({..});
}
</code></pre>
</div><div class="network-setup-section"><h3 id="network.setup" class="dr-method"><i class="dr-trixie">&#160;</i>network.setup(config, monitor)<a href="#network.setup" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 24 in the source" href="../network.js#L24">&#x27ad;</a></h3>
<div class="extra" id="network.setup-extra"></div></div><div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">config</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description"><code>{server, param}</code> (accquired from F.Lobby)</dd>
<dt class="dr-param">monitor</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description"><code>{on:function}</code></dd>
</dl>
<p></p>
<p>report status events by calling <code>monitor.on(event, data)</code>
</p>
<p class="header">open
<p>when connection opens
</p>
<p class="header">close
<p>when connection closes
</p>
<p class="header">log, mess
<p>logging information
</p>
<p class="header">error, mess
<p>connection error
</p>
<p class="header">sync_error
<p>network.js sync error
</p>
</div><div class="network-teardown-section"><h3 id="network.teardown" class="dr-method"><i class="dr-trixie">&#160;</i>network.teardown()<a href="#network.teardown" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 30 in the source" href="../network.js#L30">&#x27ad;</a></h3>
<div class="extra" id="network.teardown-extra"></div></div><div class="dr-method"><p>teardown
</p>
</div><div class="network-transfer-section"><h3 id="network.transfer" class="dr-method"><i class="dr-trixie">&#160;</i>network.transfer(name, sender, receiver)<a href="#network.transfer" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 91 in the source" href="../network.js#L91">&#x27ad;</a></h3>
<div class="extra" id="network.transfer-extra"></div></div><div class="dr-method"><p>named data exchange. both sides have to call with same name.
</p>
<dl class="dr-parameters"><dt class="dr-param">name</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param">sender</dt>
<dd class="dr-type"><em class="dr-type-function">function</em></dd>
<dd class="dr-description">should return the data to be sent</dd>
<dt class="dr-param">receiver</dt>
<dd class="dr-type"><em class="dr-type-function">function</em></dd>
<dd class="dr-description">callback when data is received</dd>
</dl>
<p>example:
</p>
<pre class="javascript code"><code>network.transfer(
<i>'game_config'</i>,
<b>function</b>() { <b>return</b> {..} },
<b>function</b>(data) { apply(data) });
</code></pre>
</div><div class="resourcemap-section"><h2 id="resourcemap" class="dr-class"><i class="dr-trixie">&#160;</i>resourcemap(map)<a href="#resourcemap" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 41 in the source" href="../resourcemap.js#L41">&#x27ad;</a></h2>
<div class="extra" id="resourcemap-extra"></div></div><p></p>
<p>a resourcemap allows mapping from a canonical resource name (shorter and understandable) to the actual url (long and ugly)
</p>
<div class="dr-class"><dl class="dr-parameters"><dt class="dr-param">map</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p>or
</p>
<dl class="dr-parameters"><dt class="dr-param">map</dt>
<dd class="dr-type"><em class="dr-type-array">array</em></dd>
<dd class="dr-description">of maps</dd>
</dl>
<p>schema
</p>
<p>{
</p>
<dl class="dr-parameters"><dt class="dr-param">condition</dt>
<dd class="dr-type"><em class="dr-type-function">function</em></dd>
<dd class="dr-description">return true to enable this map. this is only evaluated once in constructor. you can force re-evaluate by calling <code>update_condition</code>. if this property is undefined, it is assumed to be <strong>true</strong>.</dd>
<dt class="dr-param">resource</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">of name-url pairs. this is optional if a <code>get()</code> method is specified.</dd>
<dt class="dr-param">get</dt>
<dd class="dr-type"><em class="dr-type-function">function</em></dd>
<dd class="dr-description">given the resource name, return the url. this is optional if a <code>resource</code> object is specified.</dd>
</dl>
<p>}
</p>
<p>example
</p>
<pre class="javascript code"><code>map =
{
condition: <b>function</b>()
{
	<b>if</b>( window.location.href.indexOf(<i>'http:<span class="c">//'</i>)===<span class="d">0</span>)</span>
		<b>return</b> <b>true</b>;
},
resource:
{
	<i>'squirrel.png'</i>:<i>'http:<span class="c">//imagehost.com/FtvJG6rAG2mdB8aHrEa8qXj8GtbYRpqrQs9F8X8.png'</i></span>
},
get: <b>function</b>(res)
{
	<b>var</b> url=<i>'http:<span class="c">//imagehost.com/'</i>+res;</span>
	<b>return</b> url;
}
}
</code></pre>
</div><div class="resourcemap-fallback-section"><h3 id="resourcemap.fallback" class="dr-method"><i class="dr-trixie">&#160;</i>resourcemap.fallback(res, level)<a href="#resourcemap.fallback" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 91 in the source" href="../resourcemap.js#L91">&#x27ad;</a></h3>
<div class="extra" id="resourcemap.fallback-extra"></div></div><div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">res</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">resource name</dd>
<dt class="dr-param">level</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">fallback level</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-string">string</em> <span class="dr-description">resource url</span></p>
<p>if the first url failed, fallback to lower priority url.
<code>fallback(res,0)</code> will return same result as <code>get(res)</code>.
if no such level exists, return undefined.
</p>
</div><div class="resourcemap-get-section"><h3 id="resourcemap.get" class="dr-method"><i class="dr-trixie">&#160;</i>resourcemap.get(res)<a href="#resourcemap.get" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 70 in the source" href="../resourcemap.js#L70">&#x27ad;</a></h3>
<div class="extra" id="resourcemap.get-extra"></div></div><div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">res</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">resource name</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-string">string</em> <span class="dr-description">resource url</span></p>
<p></p>
<p>if there are multiple maps, it will go through them one by one in array order,
and returns the result of the first enabled map. if there is no enabled map,
or all maps return null, return <code>res</code> as is.
</p>
<p>for each enabled map, <code>get()</code> will first look into <code>map.resource</code> for a match,
and fall back to <code>map.get()</code> otherwise. if none of them gives truthy result, return null.
</p>
</div><div class="resourcemap-update_condition-section"><h3 id="resourcemap.update_condition" class="dr-method"><i class="dr-trixie">&#160;</i>resourcemap.update_condition()<a href="#resourcemap.update_condition" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 53 in the source" href="../resourcemap.js#L53">&#x27ad;</a></h3>
<div class="extra" id="resourcemap.update_condition-extra"></div></div><div class="dr-method"><p>update the mapping condition. takes effect in subsequent <code>get</code> calls.
the mapping function will be disabled if neither <code>map.resource</code> nor <code>map.get</code> if defined
</p>
</div><div class="sprite-section"><h2 id="sprite" class="dr-class"><i class="dr-trixie">&#160;</i>sprite(config)<a href="#sprite" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 117 in the source" href="../sprite.js#L117">&#x27ad;</a></h2>
<div class="extra" id="sprite-extra"></div></div><div class="dr-class"><p><li>DOM and canvas implementation</li>
<li>a sprite can have multiple sprite sheets</li>
<li>supports horizontal and vertical mirroring</li>
</p>
</div><div class="dr-class"><dl class="dr-parameters"><dt class="dr-param">config</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p>{
</p>
<dl class="dr-parameters"><dt class="dr-param">canvas</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">DOM node for sprites rendering. depending on the implementation, must be a <code>div</code> or <code>canvas</code> element; <strong>or</strong> it can be a sprite group</dd>
</dl>
<p>properties below are optional
</p>
<dl class="dr-parameters"><dt class="dr-param">wh</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description"><code>{w,h}</code> width and height, <strong>or</strong></dd>
<dt class="dr-param">wh</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">&#39;fit&#39; fit to image size, <strong>or</strong></dd>
<dt class="dr-param">xy</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description"><code>{x,y}</code> position, <strong>or</strong></dd>
<dt class="dr-param">xywh</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description"><code>{x,y,w,h}</code> position and size</dd>
<dt class="dr-param">img</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">image list</dd>
<dt class="dr-param">{ name</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">image path }; <strong>or</strong></dd>
<dt class="dr-param">img</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">if you have only one image. in this case the image will be named &#39;0&#39;</dd>
<dt class="dr-param">type</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description"><code>&#39;group&#39;</code>: create as sprite group</dd>
</dl>
<p>}
</p>
<p>config is one time only and will be dumped, without keeping a reference, after constructor returns. that means it is okay to reuse config objects, in loops or other contexts.
</p>
<pre class="javascript code"><code><b>var</b> sp_config=
{
	canvas: canvas,    <span class="c">// create and append a div to <b>this</b> node</span>
	wh: {w:<span class="d">100</span>,h:<span class="d">100</span>}, <span class="c">// width and height</span>
	wh: <i>'fit'</i>,         <span class="c">// OR fit to image size</span>
	bgcolor: <i>'#<span class="d">000</span>'</i>,   <span class="c">// background color</span>
	img: <i>'test_sprite.png'</i> <span class="c">// image path</span>
}
<b>var</b> sp1<span class="s"> = </span><b>new</b> sprite(sp_config);
</code></pre>
<p></p>
<p>extra <code>config.div</code> option (DOM implementation only). if specified, will use this <code>div</code> as sprite instead of creating a new one. and if that <code>div</code> contains <code>img</code> elements, will also adopt them if they have a <code>name</code> attribute. frankly speaking, <code>&lt;div&gt;&lt;img name=&quot;0&quot; src=&quot;sprite.png&quot;/&gt;&lt;/div&gt;</code> is equivalent to <code>img: { &#39;0&#39;:&#39;sprite.png&#39; }</code> in a <code>config</code> object.
</p>
<p>example of using a sprite group
</p>
<pre class="javascript code"><code><b>var</b> sp_group<span class="s"> = </span><b>new</b> sprite({canvas:canvas, type:<i>'group'</i>});
<b>var</b> sp1<span class="s"> = </span><b>new</b> sprite({canvas:sp_group, ...});
</code></pre>
<p></p>
<p>translating a sprite group will affect all its children. sprite groups can be nested
</p>
</div><div class="sprite-canvas-section"><h2 id="sprite-canvas" class="undefined"><i class="dr-trixie">&#160;</i>sprite-canvas<a href="#sprite-canvas" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 6 in the source" href="../sprite-canvas.js#L6">&#x27ad;</a></h2>
<div class="extra" id="sprite-canvas-extra"></div></div><p><li>use canvas to render sprites</li>
<li>(mostly) compatible with sprite-dom</li>
</p>
<div class="sprite-dom-section"><h2 id="sprite-dom" class="undefined"><i class="dr-trixie">&#160;</i>sprite-dom<a href="#sprite-dom" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 6 in the source" href="../sprite-dom.js#L6">&#x27ad;</a></h2>
<div class="extra" id="sprite-dom-extra"></div></div><p><li>DOM implementation: display sprites on page using <code>&lt;div&gt;</code> and <code>&lt;img&gt;</code> tag</li>
<li>support CSS style left/top and 2d and 3d transform, depending on browser support</li>
</p>
<div class="sprite-add_img-section"><h3 id="sprite.add_img" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.add_img(imgpath, name)<a href="#sprite.add_img" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 242 in the source" href="../sprite.js#L242">&#x27ad;</a></h3>
<div class="extra" id="sprite.add_img-extra"></div></div><div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">imgpath</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">image path (will be transformed by baseUrl or resourcemap)</dd>
<dt class="dr-param">name</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">key</dd>
</dl>
</div><div class="sprite-attach-section"><h3 id="sprite.attach" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.attach(sp)<a href="#sprite.attach" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 291 in the source" href="../sprite.js#L291">&#x27ad;</a></h3>
<div class="extra" id="sprite.attach-extra"></div></div><div class="dr-method"><ol class="dr-json"><li>without parameter</ol>
<p>if previously removed, attach back to previous sprite group
</p>
<p>an antagonist pair with <a href="#sprite.remove" class="dr-link">sprite.remove</a>
</p>
<ol class="dr-json"><li>if I am a sprite group</ol>
<dl class="dr-parameters"><dt class="dr-param">sp</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">sprite to be attached to me</dd>
</dl>
</div><div class="sprite-cur_img-section"><h3 id="sprite.cur_img" class="dr-property"><i class="dr-trixie">&#160;</i>sprite.cur_img<a href="#sprite.cur_img" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 130 in the source" href="../sprite.js#L130">&#x27ad;</a></h3>
<div class="extra" id="sprite.cur_img-extra"></div></div><div class="dr-property"><p>name of current image
</p>
</div><div class="sprite-h-section"><h3 id="sprite.h" class="dr-property"><i class="dr-trixie">&#160;</i>sprite.h<a href="#sprite.h" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 150 in the source" href="../sprite.js#L150">&#x27ad;</a></h3>
<div class="extra" id="sprite.h-extra"></div></div><div class="dr-property"><p>size
</p>
</div><div class="sprite-hide-section"><h3 id="sprite.hide" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.hide()<a href="#sprite.hide" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 298 in the source" href="../sprite.js#L298">&#x27ad;</a></h3>
<div class="extra" id="sprite.hide-extra"></div></div><p>temporarily being hidden in rendering
</p>
<div class="dr-method"><p>the hide/show pair is conceptually &#39;weaker&#39; than remove/attach pair
</p>
</div><div class="sprite-img-section"><h3 id="sprite.img" class="dr-property"><i class="dr-trixie">&#160;</i>sprite.img<a href="#sprite.img" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 125 in the source" href="../sprite.js#L125">&#x27ad;</a></h3>
<div class="extra" id="sprite.img-extra"></div></div><div class="dr-property"><p>the img list
</p>
</div><div class="sprite-masterconfig-section"><h3 id="sprite.masterconfig" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.masterconfig(config, no parameter)<a href="#sprite.masterconfig" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 55 in the source" href="../sprite.js#L55">&#x27ad;</a></h3>
<div class="extra" id="sprite.masterconfig-extra"></div></div><div class="dr-method"><p>set or get masterconfig. this is entirely optional
</p>
<ol class="dr-json"><li>static method</ol>
<dl class="dr-parameters"><dt class="dr-param">config</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">if set</dd>
<dt class="dr-param">no parameter</dt>
<dd class="dr-type"><em class="dr-type-undefined">undefined</em></dd>
<dd class="dr-description">if get</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-object">object</em> <span class="dr-description">if get</span></p>
<p>the schema is:
{
</p>
<dl class="dr-parameters"><dt class="dr-param">baseUrl</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">base url prepended to all image paths; <strong>or</strong></dd>
<dt class="dr-param">resourcemap</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">a <a href="#resourcemap" class="dr-link">resourcemap</a> definition</dd>
</dl>
<p>choose only one of <code>baseUrl</code> or <code>resourcemap</code>, they are two schemes of resource url resolution. <code>baseUrl</code> simply prepend a string before every url, while <code>resourcemap</code> is a general solution. if set, this option will take effect on the next <code>add_img</code> or <code>sprite</code> creation.
</p>
<dl class="dr-parameters"><dt class="dr-param">disable_css2dtransform</dt>
<dd class="dr-type"><em class="dr-type-bool">bool</em></dd>
<dd class="dr-description">(DOM implementation only)</dd>
<dt class="dr-param">disable_css3dtransform</dt>
<dd class="dr-type"><em class="dr-type-bool">bool</em></dd>
<dd class="dr-description">(DOM implementation only)</dd>
</dl>
<p>}
</p>
<p>because css transform support is built into prototype of <code>sprite</code> during module definition, <code>disable_css2dtransform</code> can only be set using requirejs.config <strong>before any</strong> module loading
</p>
<p>example:
</p>
<pre class="javascript code"><code>requirejs.config(
{
	baseUrl: <i>"../"</i>, <span class="c">//be sure to put all requirejs config <b>in</b> one place</span>

	config:
	{
		<i>'core/sprite'</i>:
		{
			baseUrl: <i>'../sprites/'</i>,
			resourcemap: {...}, <span class="c">//OR use a resource map</span>
			disable_css2dtransform: <b>false</b>, <span class="c">//<b>false</b> by <b>default</b></span>
			disable_css3dtransform: <b>false</b>  <span class="c">//<b>false</b> by <b>default</b></span>
		}
	}
});
</code></pre>
</div><div class="sprite-masterconfig_set-section"><h3 id="sprite.masterconfig_set" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.masterconfig_set(key, value)<a href="#sprite.masterconfig_set" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 63 in the source" href="../sprite.js#L63">&#x27ad;</a></h3>
<div class="extra" id="sprite.masterconfig_set-extra"></div></div><div class="dr-method"><ol class="dr-json"><li>static method</ol>
<p>sets a key-value pair to masterconfig
</p>
<dl class="dr-parameters"><dt class="dr-param">key</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param">value</dt>
<dd class="dr-type"><em class="dr-type-any">any</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
</div><div class="sprite-preload_image-section"><h3 id="sprite.preload_image" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.preload_image(imgname)<a href="#sprite.preload_image" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 78 in the source" href="../sprite.js#L78">&#x27ad;</a></h3>
<div class="extra" id="sprite.preload_image-extra"></div></div><div class="dr-method"><ol class="dr-json"><li>static method</ol>
<p>preload a given resource
</p>
<dl class="dr-parameters"><dt class="dr-param">imgname</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
</div><div class="sprite-remove-section"><h3 id="sprite.remove" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.remove(sp)<a href="#sprite.remove" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 281 in the source" href="../sprite.js#L281">&#x27ad;</a></h3>
<div class="extra" id="sprite.remove-extra"></div></div><div class="dr-method"><ol class="dr-json"><li>without parameter</ol>
<p>remove myself from parent sprite group
</p>
<p>the remove/attach pair means a &#39;strong removal&#39;
</p>
<ol class="dr-json"><li>OR if I am a sprite group</ol>
<dl class="dr-parameters"><dt class="dr-param">sp</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">sprite to be removed from me</dd>
</dl>
</div><div class="sprite-remove_all-section"><h3 id="sprite.remove_all" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.remove_all()<a href="#sprite.remove_all" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 309 in the source" href="../sprite.js#L309">&#x27ad;</a></h3>
<div class="extra" id="sprite.remove_all-extra"></div></div><p>remove all children from sprite group
</p>
<div class="dr-method"></div><div class="sprite-remove_img-section"><h3 id="sprite.remove_img" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.remove_img(name)<a href="#sprite.remove_img" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 247 in the source" href="../sprite.js#L247">&#x27ad;</a></h3>
<div class="extra" id="sprite.remove_img-extra"></div></div><div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">name</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">key</dd>
</dl>
</div><div class="sprite-render-section"><h3 id="sprite.render" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.render()<a href="#sprite.render" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 270 in the source" href="../sprite.js#L270">&#x27ad;</a></h3>
<div class="extra" id="sprite.render-extra"></div></div><div class="dr-method"><p>render this sprite or sprite group
</p>
</div><div class="sprite-renderer-section"><h3 id="sprite.renderer" class="dr-property"><i class="dr-trixie">&#160;</i>sprite.renderer<a href="#sprite.renderer" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 19 in the source" href="../sprite.js#L19">&#x27ad;</a></h3>
<div class="extra" id="sprite.renderer-extra"></div></div><div class="dr-property"><ol class="dr-json"><li>static property</ol>
<p><code>DOM</code> or <code>canvas</code>
</p>
</div><div class="sprite-resolve_resource-section"><h3 id="sprite.resolve_resource" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.resolve_resource(res)<a href="#sprite.resolve_resource" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 71 in the source" href="../sprite.js#L71">&#x27ad;</a></h3>
<div class="extra" id="sprite.resolve_resource-extra"></div></div><div class="dr-method"><ol class="dr-json"><li>static method</ol>
<p>convert a resource name to a full url
</p>
<dl class="dr-parameters"><dt class="dr-param">res</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">resource name</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-string">string</em> <span class="dr-description">full url</span></p>
</div><div class="sprite-set_alpha-section"><h3 id="sprite.set_alpha" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.set_alpha(alpha)<a href="#sprite.set_alpha" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 236 in the source" href="../sprite.js#L236">&#x27ad;</a></h3>
<div class="extra" id="sprite.set_alpha-extra"></div></div><div class="dr-method"><p>set sprite transparency 0.0=transparent, 1.0=opaque
</p>
<dl class="dr-parameters"><dt class="dr-param">alpha</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
</div><div class="sprite-set_bgcolor-section"><h3 id="sprite.set_bgcolor" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.set_bgcolor(color)<a href="#sprite.set_bgcolor" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 230 in the source" href="../sprite.js#L230">&#x27ad;</a></h3>
<div class="extra" id="sprite.set_bgcolor-extra"></div></div><div class="dr-method"><p>set background color of sprite
</p>
<dl class="dr-parameters"><dt class="dr-param">color</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
</div><div class="sprite-set_flipx-section"><h3 id="sprite.set_flipx" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.set_flipx(flip)<a href="#sprite.set_flipx" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 212 in the source" href="../sprite.js#L212">&#x27ad;</a></h3>
<div class="extra" id="sprite.set_flipx-extra"></div></div><div class="dr-method"><p>if set true, render the sprite in horizontal mirror
</p>
<dl class="dr-parameters"><dt class="dr-param">flip</dt>
<dd class="dr-type"><em class="dr-type-bool">bool</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
</div><div class="sprite-set_flipy-section"><h3 id="sprite.set_flipy" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.set_flipy(flip)<a href="#sprite.set_flipy" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 218 in the source" href="../sprite.js#L218">&#x27ad;</a></h3>
<div class="extra" id="sprite.set_flipy-extra"></div></div><div class="dr-method"><p>if set true, render the sprite in vertical mirror
</p>
<dl class="dr-parameters"><dt class="dr-param">flip</dt>
<dd class="dr-type"><em class="dr-type-bool">bool</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
</div><div class="sprite-set_h-section"><h3 id="sprite.set_h" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.set_h(h)<a href="#sprite.set_h" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 193 in the source" href="../sprite.js#L193">&#x27ad;</a></h3>
<div class="extra" id="sprite.set_h-extra"></div></div><div class="dr-method"><p>set height
</p>
<dl class="dr-parameters"><dt class="dr-param">h</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
</div><div class="sprite-set_img_x_y-section"><h3 id="sprite.set_img_x_y" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.set_img_x_y(x, y)<a href="#sprite.set_img_x_y" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 264 in the source" href="../sprite.js#L264">&#x27ad;</a></h3>
<div class="extra" id="sprite.set_img_x_y-extra"></div></div><div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">x</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param">y</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
</div><div class="sprite-set_img_xy-section"><h3 id="sprite.set_img_xy" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.set_img_xy(P)<a href="#sprite.set_img_xy" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 258 in the source" href="../sprite.js#L258">&#x27ad;</a></h3>
<div class="extra" id="sprite.set_img_xy-extra"></div></div><p>set the position of the image, note that coordinates should be negative to show something
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">P</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description"><code>{x,y}</code></dd>
</dl>
</div><div class="sprite-set_w-section"><h3 id="sprite.set_w" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.set_w(w)<a href="#sprite.set_w" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 187 in the source" href="../sprite.js#L187">&#x27ad;</a></h3>
<div class="extra" id="sprite.set_w-extra"></div></div><div class="dr-method"><p>set width
</p>
<dl class="dr-parameters"><dt class="dr-param">w</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
</div><div class="sprite-set_w_h-section"><h3 id="sprite.set_w_h" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.set_w_h(w, h)<a href="#sprite.set_w_h" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 181 in the source" href="../sprite.js#L181">&#x27ad;</a></h3>
<div class="extra" id="sprite.set_w_h-extra"></div></div><div class="dr-method"><p>set width and height
</p>
<dl class="dr-parameters"><dt class="dr-param">w</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param">h</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
</div><div class="sprite-set_wh-section"><h3 id="sprite.set_wh" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.set_wh(P)<a href="#sprite.set_wh" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 174 in the source" href="../sprite.js#L174">&#x27ad;</a></h3>
<div class="extra" id="sprite.set_wh-extra"></div></div><div class="dr-method"><p>set width and height
</p>
<dl class="dr-parameters"><dt class="dr-param">P</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description"><code>{w,h}</code></dd>
</dl>
</div><div class="sprite-set_x_y-section"><h3 id="sprite.set_x_y" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.set_x_y(x, y)<a href="#sprite.set_x_y" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 206 in the source" href="../sprite.js#L206">&#x27ad;</a></h3>
<div class="extra" id="sprite.set_x_y-extra"></div></div><div class="dr-method"><p>set x and y
</p>
<dl class="dr-parameters"><dt class="dr-param">x</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param">y</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
</div><div class="sprite-set_xy-section"><h3 id="sprite.set_xy" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.set_xy(P)<a href="#sprite.set_xy" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 199 in the source" href="../sprite.js#L199">&#x27ad;</a></h3>
<div class="extra" id="sprite.set_xy-extra"></div></div><div class="dr-method"><p>set x and y
</p>
<dl class="dr-parameters"><dt class="dr-param">P</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description"><code>{x,y}</code></dd>
</dl>
</div><div class="sprite-set_z-section"><h3 id="sprite.set_z" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.set_z(z)<a href="#sprite.set_z" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 224 in the source" href="../sprite.js#L224">&#x27ad;</a></h3>
<div class="extra" id="sprite.set_z-extra"></div></div><div class="dr-method"><p>set z index
</p>
<dl class="dr-parameters"><dt class="dr-param">z</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">larger index will show on top</dd>
</dl>
</div><div class="sprite-show-section"><h3 id="sprite.show" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.show()<a href="#sprite.show" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 303 in the source" href="../sprite.js#L303">&#x27ad;</a></h3>
<div class="extra" id="sprite.show-extra"></div></div><p>an antagonist pair with <a href="#sprite.hide" class="dr-link">sprite.hide</a>
</p>
<div class="dr-method"></div><div class="sprite-switch_img-section"><h3 id="sprite.switch_img" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.switch_img(name)<a href="#sprite.switch_img" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 252 in the source" href="../sprite.js#L252">&#x27ad;</a></h3>
<div class="extra" id="sprite.switch_img-extra"></div></div><div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">name</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">the key you specified in key-value-pair object <code>config.img</code></dd>
</dl>
</div><div class="sprite-w-section"><h3 id="sprite.w" class="dr-property"><i class="dr-trixie">&#160;</i>sprite.w<a href="#sprite.w" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 145 in the source" href="../sprite.js#L145">&#x27ad;</a></h3>
<div class="extra" id="sprite.w-extra"></div></div><div class="dr-property"><p>size
</p>
</div><div class="sprite-x-section"><h3 id="sprite.x" class="dr-property"><i class="dr-trixie">&#160;</i>sprite.x<a href="#sprite.x" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 135 in the source" href="../sprite.js#L135">&#x27ad;</a></h3>
<div class="extra" id="sprite.x-extra"></div></div><div class="dr-property"><p>position
</p>
</div><div class="sprite-x_flipped-section"><h3 id="sprite.x_flipped" class="dr-property"><i class="dr-trixie">&#160;</i>sprite.x_flipped<a href="#sprite.x_flipped" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 160 in the source" href="../sprite.js#L160">&#x27ad;</a></h3>
<div class="extra" id="sprite.x_flipped-extra"></div></div><div class="dr-property"><p>true if horizontally flipped
</p>
</div><div class="sprite-y-section"><h3 id="sprite.y" class="dr-property"><i class="dr-trixie">&#160;</i>sprite.y<a href="#sprite.y" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 140 in the source" href="../sprite.js#L140">&#x27ad;</a></h3>
<div class="extra" id="sprite.y-extra"></div></div><div class="dr-property"><p>position
</p>
</div><div class="sprite-y_flipped-section"><h3 id="sprite.y_flipped" class="dr-property"><i class="dr-trixie">&#160;</i>sprite.y_flipped<a href="#sprite.y_flipped" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 165 in the source" href="../sprite.js#L165">&#x27ad;</a></h3>
<div class="extra" id="sprite.y_flipped-extra"></div></div><div class="dr-property"><p>true if vertically flipped
</p>
</div><div class="sprite-z-section"><h3 id="sprite.z" class="dr-property"><i class="dr-trixie">&#160;</i>sprite.z<a href="#sprite.z" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 155 in the source" href="../sprite.js#L155">&#x27ad;</a></h3>
<div class="extra" id="sprite.z-extra"></div></div><div class="dr-property"><p>z index
</p>
</div><div class="support-section"><h2 id="support" class="undefined"><i class="dr-trixie">&#160;</i>support<a href="#support" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 14 in the source" href="../support.js#L14">&#x27ad;</a></h2>
<div class="extra" id="support-extra"></div></div><p>test for browser support of certain technologies, most code is adapted from other places.
including
<li><a href="http://davidwalsh.name/vendor-prefix">http://davidwalsh.name/vendor-prefix</a></li>
<li><a href="https://gist.github.com/3626934">https://gist.github.com/3626934</a></li>
<li><a href="https://gist.github.com/3626934">https://gist.github.com/1579671</a></li>
<a href="../sample/support.html">example</a>
</p>
<iframe src="../sample/support.html" width="800" height="200"></iframe>
<div class="support-browser-section"><h3 id="support.browser" class="dr-property"><i class="dr-trixie">&#160;</i>support.browser<a href="#support.browser" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 19 in the source" href="../support.js#L19">&#x27ad;</a></h3>
<div class="extra" id="support.browser-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">browser name</dd>
</dl>
<div class="dr-property"></div><div class="support-browser_name-section"><h3 id="support.browser_name" class="dr-property"><i class="dr-trixie">&#160;</i>support.browser_name<a href="#support.browser_name" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 24 in the source" href="../support.js#L24">&#x27ad;</a></h3>
<div class="extra" id="support.browser_name-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">browser name</dd>
</dl>
<div class="dr-property"></div><div class="support-browser_version-section"><h3 id="support.browser_version" class="dr-property"><i class="dr-trixie">&#160;</i>support.browser_version<a href="#support.browser_version" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 29 in the source" href="../support.js#L29">&#x27ad;</a></h3>
<div class="extra" id="support.browser_version-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">browser version string</dd>
</dl>
<div class="dr-property"></div><div class="support-css2dtransform-section"><h3 id="support.css2dtransform" class="dr-property"><i class="dr-trixie">&#160;</i>support.css2dtransform<a href="#support.css2dtransform" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 62 in the source" href="../support.js#L62">&#x27ad;</a></h3>
<div class="extra" id="support.css2dtransform-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">if supported, style property name with correct prefix</dd>
</dl>
<div class="dr-property"><p>you can do something like
</p>
<pre class="javascript code"><code><b>if</b>( support.css2dtransform)
	element.style[support.css2dtransform]= <i>'translate('</i>+P.x+<i>'px,'</i>+P.y+<i>'px) '</i>;
</code></pre>
</div><div class="support-css3dtransform-section"><h3 id="support.css3dtransform" class="dr-property"><i class="dr-trixie">&#160;</i>support.css3dtransform<a href="#support.css3dtransform" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 69 in the source" href="../support.js#L69">&#x27ad;</a></h3>
<div class="extra" id="support.css3dtransform-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">if supported, style property name with correct prefix</dd>
</dl>
<div class="dr-property"><pre class="javascript code"><code><b>if</b>( support.css3dtransform)
	<b>this</b>.el.style[support.css3dtransform]= <i>'translate3d('</i>+P.x+<i>'px,'</i>+P.y+<i>'px, 0px) '</i>;
</code></pre>
</div><div class="support-localStorage-section"><h3 id="support.localStorage" class="dr-property"><i class="dr-trixie">&#160;</i>support.localStorage<a href="#support.localStorage" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 80 in the source" href="../support.js#L80">&#x27ad;</a></h3>
<div class="extra" id="support.localStorage-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">similar functionality as <code>window.localStorage</code></dd>
</dl>
<p>if <code>window.localStorage</code> is not supported, will create a shim that emulates <code>window.localStorage</code> using cookie. the methods <code>clear</code>, <code>getItem</code>, <code>key</code>, <code>removeItem</code>, <code>setItem</code> and property <code>length</code> are available, but the dot or array notation does not work. for example, the following does <strong>not</strong> work
</p>
<pre class="javascript code"><code>window.localStorage.someProperty<span class="s"> = </span><span class="d">2</span>;
window.localStorage[<i>'someProperty'</i>]<span class="s"> = </span><span class="d">2</span>;
</code></pre>
<p>instead, use the following:
</p>
<pre class="javascript code"><code>support.localStorage.setItem(<i>'someProperty'</i>, <span class="d">2</span>);
</code></pre>
<p>Ideally, all HTML5 browsers should support localStorage. The only problem is localStorage does not work in IE10 in protected mode for offline files.
</p>
<div class="dr-property"></div><div class="support-mobile-section"><h3 id="support.mobile" class="dr-property"><i class="dr-trixie">&#160;</i>support.mobile<a href="#support.mobile" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 34 in the source" href="../support.js#L34">&#x27ad;</a></h3>
<div class="extra" id="support.mobile-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">mobile device name, undefined if not on a mobile device</dd>
</dl>
<div class="dr-property"></div><div class="support-prefix-section"><h3 id="support.prefix" class="dr-property"><i class="dr-trixie">&#160;</i>support.prefix<a href="#support.prefix" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 39 in the source" href="../support.js#L39">&#x27ad;</a></h3>
<div class="extra" id="support.prefix-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">browser prefix</dd>
</dl>
<div class="dr-property"></div><div class="support-prefix_css-section"><h3 id="support.prefix_css" class="dr-property"><i class="dr-trixie">&#160;</i>support.prefix_css<a href="#support.prefix_css" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 49 in the source" href="../support.js#L49">&#x27ad;</a></h3>
<div class="extra" id="support.prefix_css-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">browser prefix for css</dd>
</dl>
<div class="dr-property"></div><div class="support-prefix_dom-section"><h3 id="support.prefix_dom" class="dr-property"><i class="dr-trixie">&#160;</i>support.prefix_dom<a href="#support.prefix_dom" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 44 in the source" href="../support.js#L44">&#x27ad;</a></h3>
<div class="extra" id="support.prefix_dom-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">browser prefix for DOM</dd>
</dl>
<div class="dr-property"></div><div class="support-prefix_js-section"><h3 id="support.prefix_js" class="dr-property"><i class="dr-trixie">&#160;</i>support.prefix_js<a href="#support.prefix_js" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 54 in the source" href="../support.js#L54">&#x27ad;</a></h3>
<div class="extra" id="support.prefix_js-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">browser prefix for js</dd>
</dl>
<div class="dr-property"></div><div class="support-sessionStorage-section"><h3 id="support.sessionStorage" class="dr-property"><i class="dr-trixie">&#160;</i>support.sessionStorage<a href="#support.sessionStorage" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 85 in the source" href="../support.js#L85">&#x27ad;</a></h3>
<div class="extra" id="support.sessionStorage-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">similar functionality as <code>window.sessionStorage</code></dd>
</dl>
<div class="dr-property"></div><div class="util-section"><h2 id="util" class="undefined"><i class="dr-trixie">&#160;</i>util<a href="#util" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 5 in the source" href="../util.js#L5">&#x27ad;</a></h2>
<div class="extra" id="util-extra"></div></div><p>javascript utilities
</p>
<div class="util-css-section"><h3 id="util.css" class="dr-method"><i class="dr-trixie">&#160;</i>util.css(filename)<a href="#util.css" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 29 in the source" href="../util.js#L29">&#x27ad;</a></h3>
<div class="extra" id="util.css-extra"></div></div><p>attach a stylesheet to page
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">filename</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
</div><div class="util-extend_object-section"><h3 id="util.extend_object" class="dr-method"><i class="dr-trixie">&#160;</i>util.extend_object(obj1, obj2)<a href="#util.extend_object" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 127 in the source" href="../util.js#L127">&#x27ad;</a></h3>
<div class="extra" id="util.extend_object-extra"></div></div><p>extend obj1 with all members of obj2
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">obj1, obj2</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-object">object</em> <span class="dr-description">a modified obj1</span></p>
</div><div class="util-extract_array-section"><h3 id="util.extract_array" class="dr-method"><i class="dr-trixie">&#160;</i>util.extract_array(array, prop)<a href="#util.extract_array" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 240 in the source" href="../util.js#L240">&#x27ad;</a></h3>
<div class="extra" id="util.extract_array-extra"></div></div><div class="dr-method"><p>extract properties from an array of objects
</p>
<pre class="javascript code"><code><span class="c">//say we have</span>
[ {x:x1,y:y1}, {x:x2,y:y2}, {x:x3,y:y3},,,]
<span class="c">//we want to extract it into</span>
{
  x:
	[ x1, x2, x3,,, ],
  y:
	[ y1, y2, y3,,, ]
}
</code></pre>
<dl class="dr-parameters"><dt class="dr-param">array</dt>
<dd class="dr-type"><em class="dr-type-array">array</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param">prop</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">property name</dd>
</dl>
<p>or
</p>
<dl class="dr-parameters"><dt class="dr-param">prop</dt>
<dd class="dr-type"><em class="dr-type-array">array</em></dd>
<dd class="dr-description">array of property name</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-array">array</em> <span class="dr-description">extracted array</span></p>
</div><div class="util-make_array-section"><h3 id="util.make_array" class="dr-method"><i class="dr-trixie">&#160;</i>util.make_array(target)<a href="#util.make_array" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 48 in the source" href="../util.js#L48">&#x27ad;</a></h3>
<div class="extra" id="util.make_array-extra"></div></div><div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">target</dt>
<dd class="dr-type"><em class="dr-type-any">any</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p>if target is:
</p>
<dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-array">array</em></dd>
<dd class="dr-description">returns target as is.</dd>
<dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">returns object encapsulated in an array.</dd>
<dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-falsy">falsy</em></dd>
<dd class="dr-description">(null, undefined or zero), returns an empty array.</dd>
</dl>
</div><div class="util-push_unique-section"><h3 id="util.push_unique" class="dr-method"><i class="dr-trixie">&#160;</i>util.push_unique(array, element)<a href="#util.push_unique" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 110 in the source" href="../util.js#L110">&#x27ad;</a></h3>
<div class="extra" id="util.push_unique-extra"></div></div><p>push only if not existed in array
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">array</dt>
<dd class="dr-type"><em class="dr-type-array">array</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param">element</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-boolean">boolean</em> <span class="dr-description">true if added</span></p>
</div><div class="util-search_array-section"><h3 id="util.search_array" class="dr-method"><i class="dr-trixie">&#160;</i>util.search_array(arr, fc_criteria, [fc_replace], [search_all])<a href="#util.search_array" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 73 in the source" href="../util.js#L73">&#x27ad;</a></h3>
<div class="extra" id="util.search_array-extra"></div></div><div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">arr</dt>
<dd class="dr-type"><em class="dr-type-array">array</em></dd>
<dd class="dr-description">target to be searched</dd>
<dt class="dr-param">fc_criteria</dt>
<dd class="dr-type"><em class="dr-type-function">function</em></dd>
<dd class="dr-description">return true when an accepted element is passed in</dd>
<dt class="dr-param">[fc_replace]</dt>
<dd class="dr-type"><em class="dr-type-function">function</em></dd>
<dd class="dr-description">to return a replacement value when original value is passed in</dd>
<dt class="dr-param">[search_all]</dt>
<dd class="dr-type"><em class="dr-type-boolean">boolean</em></dd>
<dd class="dr-description">if true, will search through entire array before returning the list of indices, otherwise, will return immediately at the first accepted element</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-number">number</em> <span class="dr-description">index of the found element if <code>search_all</code> if false</span></p>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-array">array</em> <span class="dr-description">of (number) if <code>search_all</code> is true</span></p>
</div><div class="util-to_text-section"><h3 id="util.to_text" class="dr-method"><i class="dr-trixie">&#160;</i>util.to_text(obj, name, [sep], [pretext], [filter], [TTL])<a href="#util.to_text" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 173 in the source" href="../util.js#L173">&#x27ad;</a></h3>
<div class="extra" id="util.to_text-extra"></div></div><p>convert an object into JSON text
</p>
<p>most of the time you should use built-in <code>JSON.stringify</code> instead
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">obj</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param">name</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">the object&#39;s name</dd>
<dt class="dr-param">[sep]</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">separator, default as <code>\n</code></dd>
<dt class="dr-param">[pretext]</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">used in recursion only, set it to null</dd>
<dt class="dr-param">[filter]</dt>
<dd class="dr-type"><em class="dr-type-function">function</em></dd>
<dd class="dr-description">a filter <code>function(p,P)</code> passing in name p and object P, return 1 to hide the attribute, OR return a string to be shown</dd>
<dt class="dr-param">[TTL]</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">time-to-live to prevent infinite looping</dd>
</dl>
<pre class="javascript code"><code><b>var</b> obj={};
obj.a={};
obj.a.x=<span class="d">1</span>;
obj.a.y=<span class="d">1</span>;
obj.b=<i>'hello'</i>;
obj.c=<span class="d">12</span>;
console.log(util.to_text(obj,<i>'obj'</i>));
<span class="c">//outputs:</span>
obj:
{
	a:
	{
		<i>'x'</i>: <span class="d">1</span>,
		<i>'y'</i>: <span class="d">1</span>
	},
	<i>'b'</i>: <i>'hello'</i>,
	<i>'c'</i>: <span class="d">12</span>
}
</code></pre>
</div></div></div>
<script>(function (ol) {
    if (!ol) {
        return;
    }
    var li = document.createElement("li"),
        isABBR = function (str, abbr) {
            var letters = abbr.toUpperCase().split(""),
                first = letters.shift(),
                rg = new RegExp("^[" + first.toLowerCase() + first + "][a-z]*" + letters.join("[a-z]*") + "[a-z]*$");
            return !!String(str).match(rg);
        },
        score = function (me, search) {
            me = String(me);
            search = String(search);
            var score = 0,
                chunk;
            if (me == search) {
                return 1;
            }
            if (!me || !search) {
                return 0;
            }
            if (isABBR(me, search)) {
                return .9;
            }
            score = 0;
            chunk = me.toLowerCase();
            for (var j, i = 0, ii = search.length; i < ii; i++) {
                j = chunk.indexOf(search.charAt(i));
                if (~j) {
                    chunk = chunk.substring(j + 1);
                    score += 1 / (j + 1);
                }
            }
            score = Math.max(score / ii - Math.abs(me.length - ii) / me.length / 2, 0);
            return score;
        };
    li.innerHTML = '<input type="search" id="dr-filter" results="0">';
    var lis = ol.getElementsByTagName("span"),
        names = [],
        rgName = /[^\.\(]*(?=(\(\))?$)/;
    for (var i = 0, ii = lis.length; i < ii; i++) {
        names[i] = {
            li: lis[i].parentNode.parentNode,
            text: lis[i].innerHTML.match(rgName)[0]
        };
    }
    ol.insertBefore(li, ol.firstChild);
    var input = document.getElementById("dr-filter"),
		sorter = function (a, b) {
            return b.weight - a.weight;
        };
    input.style.width = "100%";
    input.style.marginTop = "10px";
    input.onclick = input.onchange = input.onkeydown = input.onkeyup = function () {
        var v = input.value,
            res = [];
        if (v.length > 1) {
            for (var i = 0, ii = names.length; i < ii; i++) {
                res[i] = {
                    li: names[i].li,
                    weight: score(names[i].text, v)
                };
            }
            res.sort(sorter);
            for (i = 0, ii = res.length; i < ii; i++) {
                ol.appendChild(res[i].li);
            }
        } else {
            for (i = 0, ii = names.length; i < ii; i++) {
                ol.appendChild(names[i].li);
            }
        }
    };
})(document.getElementById("dr-toc"));

</script>
</body></html>